# Critical Incident Methodology Configuration
#
# Explores specific memorable experiences to understand behavior
# through analysis of the incident, context, actions, outcomes, and learnings

method:
  name: critical_incident
  version: "2.0"
  goal: "Explore exceptionally positive or negative experiences that stand out"
  opening_bias: "Ask them to think of a recent time when this topic was especially memorable or significant."
  description: "Framework for understanding behavior through analysis of specific memorable experiences"

ontology:
  nodes:
    - name: incident
      description: "Specific, memorable event or experience related to the product/category"
      examples:
        - "the time the barista made my coffee perfectly"
        - "when I tried oat milk for the first time"
        - "the day my coffee maker broke"

    - name: situation
      description: "Contextual circumstances surrounding the incident"
      examples:
        - "rushing to catch a flight"
        - "hosting a dinner party"
        - "studying late for exams"

    - name: action
      description: "What the person did during the incident"
      examples:
        - "asked for oat milk instead"
        - "went to a different cafe"
        - "made it myself at home"

    - name: outcome
      description: "Result or consequence of the action taken"
      examples:
        - "coffee tasted amazing"
        - "avoided the usual stomach upset"
        - "felt proud of my choice"

    - name: emotion
      description: "Emotional response during or after the incident"
      examples:
        - "surprised and delighted"
        - "relieved and grateful"
        - "frustrated and disappointed"

    - name: attribution
      description: "What the person believes caused the outcome"
      examples:
        - "because of the creamy texture"
        - "due to the barista's skill"
        - "because oat milk is more sustainable"

    - name: learning
      description: "Insight or takeaway from the incident"
      examples:
        - "oat milk froths better than I expected"
        - "I should always specify the brand"
        - "cafes vary in quality"

    - name: behavior_change
      description: "How the incident influenced future behavior"
      examples:
        - "now I always ask for oat milk"
        - "started buying oat milk for home"
        - "recommend it to friends"

  edges:
    - name: occurred_in
      description: "Incident took place within a specific situation"
      permitted_connections:
        - [incident, situation]

    - name: involved
      description: "Action taken during the incident"
      permitted_connections:
        - [incident, action]

    - name: resulted_in
      description: "Outcome produced by an action"
      permitted_connections:
        - [action, outcome]

    - name: elicited
      description: "Emotional response triggered by outcome"
      permitted_connections:
        - [outcome, emotion]

    - name: attributed_to
      description: "Perceived cause of an outcome"
      permitted_connections:
        - [outcome, attribution]
        - [emotion, attribution]

    - name: led_to_learning
      description: "Insight gained from the incident"
      permitted_connections:
        - [incident, learning]
        - [outcome, learning]

    - name: influenced
      description: "Incident caused a change in future behavior"
      permitted_connections:
        - [incident, behavior_change]
        - [learning, behavior_change]

    - name: similar_to
      description: "Incident shares characteristics with another incident"
      permitted_connections:
        - [incident, incident]

    - name: contrasts_with
      description: "Incident differs meaningfully from another incident"
      permitted_connections:
        - [incident, incident]

extraction_guidelines:
  - "Ask for specific stories: 'Tell me about a time when...' or 'Recall a recent experience where...'"
  - "Focus on concrete incidents rather than general preferences"
  - "Extract the sequence: situation → action → outcome → emotion"
  - "Capture attributions - what the person believes caused the result"
  - "Identify learnings that changed their understanding"
  - "Note behavior changes that resulted from the incident"
  - "Look for patterns across multiple incidents"
  - "Distinguish between the factual event and the person's interpretation"

relationship_examples:
  complete_incident:
    description: "Full critical incident narrative"
    example: "Last week I was late for work and grabbed coffee at the airport. The oat milk latte was perfect - no bitter aftertaste. I felt relieved and actually enjoyed the rush"
    extraction: |
      incident('airport coffee') → occurred_in → situation('late for work')
      incident('airport coffee') → involved → action('ordered oat milk latte')
      action('ordered oat milk latte') → resulted_in → outcome('no bitter aftertaste')
      outcome('no bitter aftertaste') → elicited → emotion('relieved, enjoyed')
      outcome('no bitter aftertaste') → attributed_to → attribution('oat milk neutral taste')

  attribution_chain:
    description: "Person explains why something happened"
    example: "It worked because oat milk doesn't curdle like almond milk does"
    extraction: "outcome('smooth coffee') → attributed_to → attribution('oat milk stability vs almond milk')"

  behavior_change:
    description: "Incident leads to new behavior"
    example: "Since that day, I've stopped buying dairy milk entirely"
    extraction: "incident('positive oat milk experience') → influenced → behavior_change('stopped buying dairy')"

extractability_criteria:
  extractable_contains:
    - "Specific stories or anecdotes ('the time when...', 'last week...')"
    - "Sequences of events or actions"
    - "Clear outcomes (positive or negative)"
    - "Emotional reactions to experiences"
    - "Explanations or causal attributions"
    - "Changes in behavior or decisions"
  non_extractable_contains:
    - "General opinions without specific examples"
    - "Hypothetical scenarios ('I would probably...')"
    - "Second-hand stories ('my friend said...')"
    - "Factual product descriptions without personal experience"

signals:
  graph:
    - graph.node_count
    - graph.max_depth
    - graph.orphan_count

  llm:
    - llm.response_depth
    - llm.sentiment
    - llm.uncertainty

  temporal:
    - temporal.strategy_repetition_count
    - temporal.turns_since_strategy_change

  meta:
    - meta.interview_progress
    - meta.interview.phase

signal_norms:
  graph.node_count: 30
  graph.edge_count: 60
  graph.orphan_count: 15
  graph.max_depth: 6
  temporal.strategy_repetition_count: 5
  temporal.turns_since_strategy_change: 5

strategies:
  - name: explore_incident
    description: "Explore the incident details - what happened, when, where"
    signal_weights:
      llm.uncertainty: 0.5
      graph.orphan_count: 0.7
      temporal.strategy_repetition_count: 0.6

  - name: explore_outcomes
    description: "Understand what happened as a result and why it mattered"
    signal_weights:
      llm.response_depth.surface: 0.8
      graph.node_count: 0.5

  - name: explore_emotions
    description: "Understand the emotional response and feelings"
    signal_weights:
      llm.sentiment.positive: 0.7
      llm.sentiment.negative: 0.7
      llm.response_depth.moderate: 0.5

  - name: explore_attributions
    description: "Understand what they believe caused the outcome"
    signal_weights:
      graph.node_count: 0.6
      llm.response_depth.moderate: 0.7

  - name: explore_learnings
    description: "Identify insights and how they changed understanding"
    signal_weights:
      graph.max_depth: 0.8
      llm.response_depth.deep: 0.9

  - name: explore_behavior_change
    description: "Understand how the incident influenced future behavior"
    signal_weights:
      meta.interview_progress: 0.7
      graph.max_depth: 0.6

phases:
  early:
    description: "Initial incident exploration"
    phase_boundaries:
      early_max_nodes: 5
      mid_max_nodes: 12
    signal_weights:
      explore_incident: 1.5
      explore_outcomes: 1.2
      explore_emotions: 0.8
    phase_bonuses:
      explore_incident: 0.2

  mid:
    description: "Deepening understanding of causes and emotions"
    phase_boundaries:
      early_max_nodes: 5
      mid_max_nodes: 12
    signal_weights:
      explore_outcomes: 1.3
      explore_attributions: 1.3
      explore_emotions: 1.0
      explore_learnings: 0.8
    phase_bonuses:
      explore_attributions: 0.3

  late:
    description: "Extracting learnings and behavior changes"
    phase_boundaries:
      early_max_nodes: 5
      mid_max_nodes: 12
    signal_weights:
      explore_learnings: 1.5
      explore_behavior_change: 1.3
      explore_outcomes: 0.5
    phase_bonuses:
      explore_learnings: 0.3
      explore_behavior_change: 0.2
