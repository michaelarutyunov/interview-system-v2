{"id":"interview-system-v2-05s","title":"Phase 5: API \u0026 UI (mode selector)","description":"Add mode to SessionCreate schema, mode selector in UI, documentation. ~2% of codebase. See ADR-005 Phase 5.","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-22T11:52:09.634441222Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:48:01.555230222Z","closed_at":"2026-01-24T00:48:01.555230222Z","close_reason":"superseded by sequential mode architecture","dependencies":[{"issue_id":"interview-system-v2-05s","depends_on_id":"interview-system-v2-kl3","type":"blocks","created_at":"2026-01-22T11:52:16.326250269Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-095","title":"Update SessionService to require StrategyService instead of Optional[None]","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:58:00.182075859Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T23:54:12.364830326Z","closed_at":"2026-01-21T23:54:12.364830326Z","close_reason":"Superseded by ADR-004: adopting two-tier hybrid scoring system instead of multiplicative Phase 3 approach"}
{"id":"interview-system-v2-0bd","title":"Remove legacy MethodologySchema migration code if unused","description":"methodology_schema.py:90-97 has six deprecated fields (name, version, description, node_types, edge_types, valid_connections) and migration logic in _migrate_from_legacy(). If no YAML config files still use the legacy format, this migration shim can be removed.\n\nVerify: Check all config/methodologies/*.yaml files for legacy format usage before removing.\n\nFiles: src/domain/models/methodology_schema.py:90-152","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:16.363871021Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:47:35.589956044Z","closed_at":"2026-01-30T14:47:35.589956044Z","close_reason":"Successfully migrated critical_incident.yaml and repertory_grid.yaml to new ontology format, removed legacy transformation layer from schema_loader.py, and updated tests. All 18 tests pass."}
{"id":"interview-system-v2-0il","title":"Add dual LLM client configuration","description":"Update config to support llm_main (Claude Sonnet for questions) and llm_light (Claude Haiku for scoring). Update LLM client initialization to handle both providers.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:56.982511983Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T00:08:26.371222249Z","closed_at":"2026-01-23T00:08:26.371222249Z","close_reason":"Implemented dual LLM configuration"}
{"id":"interview-system-v2-0t4","title":"Fix signal timing - confusion detected too late","description":"Investigate why confusion signals are extracted AFTER question generation. Consider signal persistence layer or immediate rephrase trigger.","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-26T11:59:59.898113784Z","created_by":"michaelarutyunov","updated_at":"2026-01-26T13:07:41.839978305Z","closed_at":"2026-01-26T13:07:41.839978305Z","close_reason":"Investigation complete: Signal extraction timing is CORRECT. Signals extracted in StrategySelectionStage (stage 6) BEFORE scoring, so veto and selective boost work as designed. The one-turn delay is inherent to turn-based design - confusion detected in Turn N affects Turn N+1, which is expected."}
{"id":"interview-system-v2-0v4","title":"Fix async/await bug in UI controls","description":"Bug 1: TypeError 'coroutine' object is not iterable - Fixed by adding asyncio.run() wrappers.\n\nBug 2: TypeError string indices - API returns {sessions: [...], total: N} but code expected flat list. Fixed by extracting response['sessions'].\n\nBug 3: TCPTransport closed - httpx.AsyncClient incompatible with Streamlit's sync model + asyncio.run().\n\nSolution: Documented in ADR-001 - implementing dual sync/async API for APIClient to support both Streamlit UI and future agent orchestration.","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T20:05:51.660690756Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:47:57.416043133Z","closed_at":"2026-01-24T00:47:57.416043133Z","close_reason":"Investigation complete: 0v4=already fixed (no async in UI), 05s=superseded by sequential modes, kl3=already implemented (YAML configs exist), 5iw=superseded by ADR-004 two-tier scoring, 7r7=implemented via EngagementScorer proxy"}
{"id":"interview-system-v2-0vq","title":"Task 5: Implement NoveltyScorer","description":"Implement NoveltyScorer from spec 3.5 - prevents repetitive exploration by penalizing strategies that focus on recently explored concepts","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T10:13:38.227345579Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:40:11.957493133Z","closed_at":"2026-01-24T00:40:11.957493133Z","close_reason":"Fixed by commit 313c209 - scoring metrics, edge extraction, and strategy selection fixes. Includes: (1) StrategyService implementation, (2) NoveltyScorer implementation, (3) coverage_state tracking in graph_repo, (4) AmbiguityScorer recent_nodes bug fix, (5) EngagementScorer threshold fix, (6) DepthBreadthBalanceScorer threshold fix"}
{"id":"interview-system-v2-14r","title":"Spec 1.3: Database Module","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:28.13000256Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:01:46.818079455Z","closed_at":"2026-01-21T02:01:46.818079455Z","close_reason":"Verified by subagent - all 5 tests pass","dependencies":[{"issue_id":"interview-system-v2-14r","depends_on_id":"interview-system-v2-z44","type":"blocks","created_at":"2026-01-21T01:57:52.060003812Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-14r","depends_on_id":"interview-system-v2-8gl","type":"blocks","created_at":"2026-01-21T01:57:52.306537233Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-19d","title":"Spec 2.10: Turn Endpoint (POST /sessions/{id}/turns)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:52.171993999Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:44:12.960798783Z","closed_at":"2026-01-21T07:44:12.960798783Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-19d","depends_on_id":"interview-system-v2-uq1","type":"blocks","created_at":"2026-01-21T07:19:24.471040175Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-1a9","title":"Implement /sessions/{id}/graph endpoint to return graph state","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:58:00.739431107Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T23:54:12.379368088Z","closed_at":"2026-01-21T23:54:12.379368088Z","close_reason":"Superseded by ADR-004: adopting two-tier hybrid scoring system instead of multiplicative Phase 3 approach"}
{"id":"interview-system-v2-1f2","title":"Migration system design for single-use interview deployment","description":"\n# Context\n\nThe interview-system-v2 is designed as a **single-use deployment tool**: it launches, conducts one interview, passes data/diagnostics to coordinating code, then shuts down.\n\n## Current State\n\n- **Migration system**: Runs all  migrations in  on every server startup\n- **No migration tracking**: Migrations re-run every time; no table tracking which migrations have been applied\n- **Idempotency issue**: `CREATE TABLE IF NOT EXISTS` works fine, but `ALTER TABLE ADD COLUMN` fails on re-run (encountered with 003_add_stance_to_nodes.sql)\n\n## Why This Matters Now\n\n- **Local development**: Frequent server restarts mean migrations run repeatedly\n- **Container restarts**: If database volume persists, restarted containers hit same issue\n- **Mid-interview restarts**: If pod crashes mid-interview, restart shouldn't fail migration\n\n## Key Question\n\n**What is the lifecycle of the database?**\n\n| Scenario | Persistence needed | Migration implication |\n|----------|-------------------|----------------------|\n| Dev/Testing | Yes (reuse across runs) | Idempotency or version tracking needed |\n| Production (ephemeral) | No (discard after interview) | Current approach fine |\n| Production (resilient) | Maybe (survive pod restart) | Version tracking needed |\n\n## Options\n\n1. **Status quo** — Accept dev needs `rm data/interview.db` occasionally\n2. **Version tracking table** — Store applied migrations, skip on re-run (standard practice)\n3. **Idempotent migrations** — Use `PRAGMA table_info` checks or Python try-catch\n4. **In-memory SQLite** — Use `:memory:` if no persistence needed at all\n5. **Auto-wipe on startup** — Delete DB if stale, based on schema version\n\n## Decision Needed\n\n- Does interview data need to persist after the tool exits?\n- Is the database handed off to coordinating code, or exported/transcoded first?\n- Should the tool survive a mid-interview restart without data loss?\n\n## Dependencies\n\nNone — this is architectural planning\n","status":"closed","priority":3,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T13:12:37.457206595Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:53:56.671074249Z","closed_at":"2026-01-30T14:53:56.671074249Z","close_reason":"Deprecated - migration system works adequately for current single-use deployment model"}
{"id":"interview-system-v2-1lp","title":"Improve edge extraction to achieve 50%+ node connectivity","description":"Improve edge extraction to achieve 50% connectivity. Session had only 4 edges from 18 nodes (22%). Missing causal links. From session_05a609ac.json ID5.","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:45:11.159960654Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T01:32:46.504899695Z","closed_at":"2026-01-25T01:32:46.504899695Z","close_reason":"Implementation complete. Fix committed in 313c209: added MEC chain extraction guidelines (explicit/implicit), relationship examples (4 types), and target metric (2-3x edges vs nodes). Pending verification in next interview."}
{"id":"interview-system-v2-1rh","title":"Make focus generation declarative/config-driven instead of hardcoded if-elif chain","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T19:00:51.371044411Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T20:55:15.532039989Z","closed_at":"2026-01-24T20:55:15.532039989Z","close_reason":"Implemented in Phase 2 and P2 blockers work"}
{"id":"interview-system-v2-1xx","title":"Set up LLM infrastructure for LLM signal extraction","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T00:06:11.874762429Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T11:23:40.665232634Z","closed_at":"2026-01-29T11:23:40.665232634Z","close_reason":"Closed"}
{"id":"interview-system-v2-28p","title":"Phase 2: Domain Model Updates (InterviewMode enum)","description":"Add InterviewMode enum to Session, update Session to use abstract InterviewState. ~2% of codebase. See ADR-005 Phase 2.","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-22T11:52:07.333140209Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T12:14:33.944494604Z","closed_at":"2026-01-22T12:14:33.944494604Z","close_reason":"Phase 2 complete: Added InterviewMode field to Session, SessionState, SessionCreate, and SessionResponse. Updated API routes to pass mode through.","dependencies":[{"issue_id":"interview-system-v2-28p","depends_on_id":"interview-system-v2-oam","type":"blocks","created_at":"2026-01-22T11:52:15.531555898Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-2c1","title":"Remove deprecated GraphState methods and enums","description":"knowledge_graph.py contains:\n- Lines 12-36: NodeType and EdgeType enums marked 'kept for IDE autocomplete only' — authoritative source is YAML config\n- Lines 178-182: deprecated 'phase' computed property\n- Lines 211-213: deprecated get_phase() method\n- Lines 215-222: deprecated set_phase() method\n\nTests in test_models.py still call get_phase()/set_phase() — update tests to use current_phase directly before removing.\n\nFiles: src/domain/models/knowledge_graph.py, tests/unit/test_models.py","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:16.045561848Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:08:20.443285538Z","closed_at":"2026-01-30T14:08:20.443285538Z","close_reason":"2c1: Removed deprecated GraphState enums (NodeType, EdgeType), deprecated phase computed property, and deprecated get_phase()/set_phase() methods. Updated tests to use current_phase directly.\\n\\ndxo: Deleted empty src/utils/ directory. Added CorrelationIDMiddleware to main.py that generates UUID4 request_id, binds to structlog context, and adds X-Request-ID header to responses.","dependencies":[{"issue_id":"interview-system-v2-2c1","depends_on_id":"interview-system-v2-94j","type":"blocks","created_at":"2026-01-30T01:11:50.970314927Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-2n8","title":"Update UI components for Phase 3/4 compatibility","description":"Fix UI components to work with Phase 3 (joint strategy-node scoring) and Phase 4 (methodology-centric) architecture.\n\nCritical fixes:\n1. ui/components/scoring.py - _render_strategy_ranking() handles tuples not dicts\n2. ui/streamlit_app.py - phase field displayed but not in API response\n3. ui/components/scoring.py - update signal lists for Phase 4 (node-level signals)\n4. ui/components/metrics.py - remove legacy scoring gauges (two-tier removed)\n5. ui/components/metrics.py - update strategy descriptions for Phase 4","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T08:38:33.091206318Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:56:15.935028531Z","closed_at":"2026-01-30T14:56:15.935028531Z","close_reason":"All 5 items implemented in commit 5acc254 (2026-01-29): tuple handling, phase field in API, Phase 4 signals, legacy gauges removed, strategy descriptions updated"}
{"id":"interview-system-v2-2op","title":"Interview phasing system","description":"Design and implement interview phase detection (early/mid/late) based on graph signals. Phases configure signal weights for strategies. Tasks: 1) Design phase detection logic using graph signals, 2) Implement interview.phase signal, 3) Add phase-based configuration structure to YAML, 4) Update methodology configs with phase-specific weights, 5) Integrate phase detection into strategy selection","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:15:07.284072949Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T11:23:40.662538521Z","closed_at":"2026-01-29T11:23:40.662538521Z","close_reason":"Closed"}
{"id":"interview-system-v2-32q","title":"Verify scoring metrics display correctly in Streamlit UI","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:58:01.008549039Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T23:54:12.387544347Z","closed_at":"2026-01-21T23:54:12.387544347Z","close_reason":"Superseded by ADR-004: adopting two-tier hybrid scoring system instead of multiplicative Phase 3 approach"}
{"id":"interview-system-v2-3qu","title":"Task 2: Synthetic Service (Spec 4.2)","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T12:39:28.58273604Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T12:39:32.728525847Z","closed_at":"2026-01-21T12:39:32.728525847Z","close_reason":"Closed"}
{"id":"interview-system-v2-416","title":"Phase 1: NodeStateTracker foundation","description":"Create NodeState dataclass and NodeStateTracker service. Wire into pipeline after graph update stage. Tasks: 1) Create NodeState dataclass with all parameters, 2) Implement NodeStateTracker service with core methods, 3) Integrate into turn pipeline, 4) Add basic unit tests","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:14:53.419914584Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T06:49:41.471072482Z","closed_at":"2026-01-29T06:49:41.471072482Z","close_reason":"Closed"}
{"id":"interview-system-v2-44j","title":"Add stance attribute to stimulus nodes","description":"Add optional stance field (+1, 0, -1) to stimulus nodes during ingestion. Update stimulus parsing module to include stance from element data. Used by ContrastOpportunityScorer.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:44.35991253Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T00:22:40.887188304Z","closed_at":"2026-01-23T00:22:40.887188304Z","close_reason":"Added stance attribute to stimulus nodes"}
{"id":"interview-system-v2-4fl","title":"Implement TwoTierScoringEngine with configuration system","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:57.170537969Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T00:05:51.980124378Z","closed_at":"2026-01-22T00:05:51.980124378Z","close_reason":"Two-tier scoring system implemented - see ADR-004"}
{"id":"interview-system-v2-4je","title":"Task 9: Integrate StrategyService into SessionService","description":"Integrate StrategyService into SessionService from spec 3.9 - replaces hardcoded strategy with adaptive selection","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T10:13:40.701669619Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:42:50.251250896Z","closed_at":"2026-01-24T00:42:50.251250896Z","close_reason":"Implemented: (1) text_similarity.py with TFIDFCosineSimilarity class, (2) all 3 Tier1 scorers (knowledge_ceiling, element_exhausted, recent_redundancy) using text_similarity, (3) StrategySelectionStage integrated into SessionService pipeline. Blocked by yho now resolved."}
{"id":"interview-system-v2-4qs","title":"Implement graph_utils.py with Louvain clustering","description":"Create src/services/scoring/graph_utils.py with cluster analysis functions: get_clusters, local_cluster_density, cluster_size, has_peripheral_candidates, has_opposite_stance_node, median_cluster_degree. Use python-louvain for community detection with turn-level caching.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:33.933714321Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T00:24:15.746457483Z","closed_at":"2026-01-23T00:24:15.746457483Z","close_reason":"Implemented graph_utils.py with Louvain clustering, cluster analysis functions, and caching"}
{"id":"interview-system-v2-4rz","title":"Fix ruff and pyright linting issues","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T00:06:12.944377281Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T11:23:40.654864905Z","closed_at":"2026-01-29T11:23:40.654864905Z","close_reason":"Closed"}
{"id":"interview-system-v2-4x1","title":"Add additive phase weight boosting for zero-score strategies","description":"scoring.py:108-110 applies phase weights as pure multiplication: final_score = base_score * multiplier. If base_score=0 (no signals matched), phase weighting cannot rescue the strategy. A 'close' strategy with base_score=0 and phase_weight=5.0 in late phase still scores 0.\n\nFix: Use additive+multiplicative boosting: final_score = (base_score * multiplier) + phase_bonus, where phase_bonus is a small constant for phase-preferred strategies. Or use max(base_score, minimum_phase_score) * multiplier.\n\nFiles: src/methodologies/scoring.py:108-110","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:15.802460241Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:53:58.342007243Z","closed_at":"2026-01-30T13:53:58.342007243Z","close_reason":"All 4 beads implemented successfully:\\n\\nfm6: Replaced all Optional[Any] with concrete types in PipelineContext (ContextLoadingOutput, UtteranceSavingOutput, ExtractionOutput, etc.) for proper type safety.\\n\\np6w: Modified record_yield() to count nodes_modified as yield (full 1.0x yield as specified). Added nodes_modified to yield detection condition and logging.\\n\\n4x1: Added phase_bonuses to PhaseConfig dataclass and YAML loader. Modified rank_strategies() and rank_strategy_node_pairs() to apply additive bonuses: final_score = (base_score * multiplier) + bonus. Added example phase_bonuses to means_end_chain.yaml.\\n\\n7o6: Created tests/conftest.py with test_db fixture. Converted test_session_service.py to use real database with mocked LLM services. Fixed SessionState creation to include required fields (methodology, concept_id, concept_name). Fixed graph repo method call. 15 tests passing.","dependencies":[{"issue_id":"interview-system-v2-4x1","depends_on_id":"interview-system-v2-vpm","type":"blocks","created_at":"2026-01-30T01:11:44.57068578Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-54d","title":"Add configurable phase boundaries per methodology","description":"Phase detection uses hardcoded node-count thresholds (\u003c5, \u003c15, 15+) in interview_phase.py. Different methodologies have different interview rhythms and should support methodology-specific phase boundaries via YAML config. Ref: jolly-dancing-wilkes.md Part 2C, Part 4 #9","status":"open","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:37:00.580956412Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:37:00.580956412Z","comments":[{"id":6,"issue_id":"interview-system-v2-54d","author":"michaelarutyunov","text":"## Sufficiency: NEEDS ENRICHMENT\n\n### Current state:\n- Phase detection in interview_phase.py uses hardcoded node-count thresholds: \u003c5 (early), \u003c15 (mid), 15+ (late)\n- No reference to methodology config — same boundaries for all methodologies\n- YAML configs already have a 'phases' section with signal_weights and phase_bonuses, but NOT phase boundaries\n\n### What's needed:\n- Add phase_boundaries to YAML config (e.g., early_max_nodes: 5, mid_max_nodes: 15)\n- InterviewPhaseSignal needs access to methodology config to read boundaries\n- Default fallback for methodologies that don't define boundaries\n\n### Watch-outs \u0026 Risks:\n1. **InterviewPhaseSignal.detect() currently takes (context, graph_state, response_text)** — needs methodology config passed in or accessible via context\n2. **Phase names may differ per methodology** — MEC uses early/mid/late, but JTBD might use different phases. Need to decide if phase names are fixed or configurable\n3. **Existing YAML phases section** already defines phase-specific weights — boundaries are a separate concept from weights. Don't conflate them\n4. **All 5 methodology YAMLs need updating** — or graceful fallback to current defaults\n\n### Model guidance: **Opus-level** — requires design decisions about phase abstraction (fixed names vs configurable), how to pass config to signal detectors, and updating 5 YAML configs consistently. Touches signal detection architecture.","created_at":"2026-02-02T15:07:18Z"},{"id":13,"issue_id":"interview-system-v2-54d","author":"michaelarutyunov","text":"## Design Decisions (resolved)\n\n**Phase names**: Fixed — early/mid/late for all methodologies. Only the node-count thresholds are configurable per methodology.\n\n**Boundary metric**: Keep node count (current approach). More meaningful than turn percentage since it reflects actual content gathered.\n\n**Implementation notes**:\n- Add to YAML config: phase_boundaries: {early_max_nodes: 5, mid_max_nodes: 15}\n- InterviewPhaseSignal reads boundaries from methodology config (via context or injected config)\n- Default fallback: {early_max_nodes: 5, mid_max_nodes: 15} if not specified in YAML\n- Update all 5 methodology YAMLs with appropriate boundaries (may differ per methodology)","created_at":"2026-02-02T18:18:01Z"}]}
{"id":"interview-system-v2-54p","title":"Update extraction service and prompts for new schema","description":"Update extraction.py prompts to use new ontology structure. Update ExtractionService to set is_terminal/level on concepts from schema. Update schema_loader.py for new file structure.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:30.851177985Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T13:02:17.903631599Z","closed_at":"2026-01-29T13:02:17.903631599Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-54p","depends_on_id":"interview-system-v2-p3h","type":"blocks","created_at":"2026-01-29T12:21:42.315116029Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-54p","depends_on_id":"interview-system-v2-din","type":"blocks","created_at":"2026-01-29T12:21:42.582457286Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-56t","title":"Add element linking during extraction","description":"Extend extraction prompt to include element linking. Add linked_elements: List[int] to ExtractedConcept model. Store element links in node properties. Fallback to alias matching when LLM returns empty list.","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T17:52:31.048745104Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T22:34:24.926875492Z","closed_at":"2026-01-25T22:34:24.926875492Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-56t","depends_on_id":"interview-system-v2-7p8","type":"blocks","created_at":"2026-01-25T17:52:44.01784545Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-5cj","title":"Fix graph display - nodes/edges not being saved","description":"Knowledge graph shows 0 nodes/edges throughout interview. Extraction is working (concepts found) but graph isn't being populated. Need to trace if GraphService is saving nodes/edges or if the issue is in retrieval.","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:47:05.481716884Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:40:11.952023065Z","closed_at":"2026-01-24T00:40:11.952023065Z","close_reason":"Fixed by commit 313c209 - scoring metrics, edge extraction, and strategy selection fixes. Includes: (1) StrategyService implementation, (2) NoveltyScorer implementation, (3) coverage_state tracking in graph_repo, (4) AmbiguityScorer recent_nodes bug fix, (5) EngagementScorer threshold fix, (6) DepthBreadthBalanceScorer threshold fix"}
{"id":"interview-system-v2-5iw","title":"Task 7: Implement ArbitrationEngine","description":"Implement ArbitrationEngine from spec 3.7 - multi-dimensional scoring engine combining all 5 scorers","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T10:13:39.477307227Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:47:57.428854129Z","closed_at":"2026-01-24T00:47:57.428854129Z","close_reason":"Investigation complete: 0v4=already fixed (no async in UI), 05s=superseded by sequential modes, kl3=already implemented (YAML configs exist), 5iw=superseded by ADR-004 two-tier scoring, 7r7=implemented via EngagementScorer proxy"}
{"id":"interview-system-v2-5mv","title":"Spec 2.7: Question Prompts (Means-End Chain methodology)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:50.664140504Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:44:12.48411621Z","closed_at":"2026-01-21T07:44:12.484122773Z","dependencies":[{"issue_id":"interview-system-v2-5mv","depends_on_id":"interview-system-v2-ag4","type":"blocks","created_at":"2026-01-21T07:19:16.136323826Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-5nq","title":"Create ChainCompletionSignal","description":"Implement new signal that counts complete causal chains from level 1 nodes to terminal nodes using BFS traversal. Output: complete_chain_count, has_complete_chain, level_1_node_count","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:30.248788596Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T13:02:17.892169841Z","closed_at":"2026-01-29T13:02:17.892169841Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-5nq","depends_on_id":"interview-system-v2-zfy","type":"blocks","created_at":"2026-01-29T12:21:42.052581142Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-5rt","title":"Revisit EngagementScorer thresholds with collected data","description":"In src/services/scoring/tier2/engagement.py:41, momentum thresholds were lowered to match observed data (35-70 range vs 100). Need to revisit after more data collection - may need relative percentile-based thresholds instead of absolute values.","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T07:47:21.820322334Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T00:06:48.173231115Z","closed_at":"2026-01-25T00:06:48.173231115Z","close_reason":"Closed"}
{"id":"interview-system-v2-611","title":"Implement fail-fast error handling for scorer failures","description":"Replace graceful degradation with fail-fast approach for MVP: raise ScorerFailureError when any scorer fails instead of logging and continuing. See ADR-009 and docs/raw_ideas/silent_fail.md for details.","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T19:28:49.1170978Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T20:51:23.799887106Z","closed_at":"2026-01-23T20:51:23.799887106Z","close_reason":"Closed"}
{"id":"interview-system-v2-663","title":"Add counter-mechanism for repetitive 'What else' question patterns","description":"Add counter for repetitive What else question patterns. Current prompts rely on what else as primary probe. From session_05a609ac.json ID3.","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:45:10.895162099Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T01:14:28.081692495Z","closed_at":"2026-01-25T01:14:28.081692495Z","close_reason":"Closed"}
{"id":"interview-system-v2-6al","title":"Task 5: Regression Tests (Spec 4.5)","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T13:31:03.414524414Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T13:31:10.171869176Z","closed_at":"2026-01-21T13:31:10.171869176Z","close_reason":"Closed"}
{"id":"interview-system-v2-6c1","title":"Make CoverageBreadthSignal method-agnostic","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T00:06:12.463822087Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T13:02:52.722785973Z","closed_at":"2026-01-29T13:02:52.722785973Z","close_reason":"Closed"}
{"id":"interview-system-v2-6wh","title":"Wire ArbitrationEngine with all 5 scorers in FastAPI dependencies","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:57:59.916077414Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T23:54:12.356838419Z","closed_at":"2026-01-21T23:54:12.356838419Z","close_reason":"Superseded by ADR-004: adopting two-tier hybrid scoring system instead of multiplicative Phase 3 approach"}
{"id":"interview-system-v2-6xa","title":"Delete deprecated CoverageBreadthSignal and MissingTerminalValueSignal","description":"coverage.py:12-117 contains two signal classes marked with DeprecationWarning, commented out of __init__.py, and never registered in the signal registry. Completely orphaned code from refactoring.\n\nFiles to clean: src/methodologies/signals/graph/coverage.py (remove classes), src/methodologies/signals/graph/__init__.py (remove commented imports)","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:15.672195137Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:07:07.674271973Z","closed_at":"2026-01-30T13:07:07.674271973Z","close_reason":"Deleted deprecated CoverageBreadthSignal and MissingTerminalValueSignal classes, removed all references, fixed InterviewProgressSignal to use chain_completion instead. 8 files changed, 17 insertions, 151 deletions.","dependencies":[{"issue_id":"interview-system-v2-6xa","depends_on_id":"interview-system-v2-qce","type":"blocks","created_at":"2026-01-30T01:15:05.693890326Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-75a","title":"Phase 2: Node-Level signals implementation","description":"Implement node-level signals derived from NodeStateTracker. Tasks: 1) Exhaustion signals (node.exhausted, node.yield_stagnation), 2) Engagement signals (node.focus_streak, node.recency_score), 3) Relationship signals (node.is_orphan, node.edge_count), 4) Strategy repetition signals (node.strategy_repetition), 5) Add signal tests","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:14:54.686431254Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T07:04:04.194010644Z","closed_at":"2026-01-29T07:04:04.194010644Z","close_reason":"Closed"}
{"id":"interview-system-v2-7f9","title":"Integrate Phase 3 adaptive strategy selection into SessionService","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:57:54.348415108Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T23:54:18.329414574Z","closed_at":"2026-01-21T23:54:18.329414574Z","close_reason":"Superseded by ADR-004: adopting two-tier hybrid scoring system instead of multiplicative Phase 3 approach","dependencies":[{"issue_id":"interview-system-v2-7f9","depends_on_id":"interview-system-v2-6wh","type":"blocks","created_at":"2026-01-21T22:58:08.370831439Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-7f9","depends_on_id":"interview-system-v2-095","type":"blocks","created_at":"2026-01-21T22:58:08.651639256Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-7f9","depends_on_id":"interview-system-v2-865","type":"blocks","created_at":"2026-01-21T22:58:08.915789176Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-7f9","depends_on_id":"interview-system-v2-1a9","type":"blocks","created_at":"2026-01-21T22:58:09.181452149Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-7f9","depends_on_id":"interview-system-v2-32q","type":"blocks","created_at":"2026-01-21T22:58:09.437820961Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-7lw","title":"Prompt Generation: Use schema for LLM prompts","description":"Update get_extraction_system_prompt to load schema and build descriptions. Remove hardcoded NODE_TYPE_DESCRIPTIONS and EDGE_TYPE_DESCRIPTIONS dicts. Add tests for prompt generation from schema.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T02:02:24.121784725Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T07:41:49.341871391Z","closed_at":"2026-01-23T07:41:49.341871391Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-7lw","depends_on_id":"interview-system-v2-tqw","type":"blocks","created_at":"2026-01-23T02:02:37.174838462Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-7o6","title":"Fix unit tests for pipeline architecture","description":"Unit tests for SessionService need to be converted to integration tests. The Pipeline Refactoring (Phase 3) changed the architecture - stages now make real database calls instead of using mocked dependencies.\n\nFixes needed:\n- Convert test_session_service.py to use test_db fixture\n- Update test fixtures to use init_database() for real tables\n- Ensure pipeline stages can work with test database\n\nCurrent state: 245 tests pass, 54 fail due to test infrastructure (not functional bugs).","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:53:15.793127478Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:53:58.348497196Z","closed_at":"2026-01-30T13:53:58.348497196Z","close_reason":"All 4 beads implemented successfully:\\n\\nfm6: Replaced all Optional[Any] with concrete types in PipelineContext (ContextLoadingOutput, UtteranceSavingOutput, ExtractionOutput, etc.) for proper type safety.\\n\\np6w: Modified record_yield() to count nodes_modified as yield (full 1.0x yield as specified). Added nodes_modified to yield detection condition and logging.\\n\\n4x1: Added phase_bonuses to PhaseConfig dataclass and YAML loader. Modified rank_strategies() and rank_strategy_node_pairs() to apply additive bonuses: final_score = (base_score * multiplier) + bonus. Added example phase_bonuses to means_end_chain.yaml.\\n\\n7o6: Created tests/conftest.py with test_db fixture. Converted test_session_service.py to use real database with mocked LLM services. Fixed SessionState creation to include required fields (methodology, concept_id, concept_name). Fixed graph repo method call. 15 tests passing."}
{"id":"interview-system-v2-7p8","title":"Enrich concept YAML format with aliases and context","description":"Add aliases field to concept elements for semantic matching. Add context field (topic, insight, promise, rtb) for LLM research brief. Element IDs become integers (1, 2, 3). Remove type field (methodology-agnostic). Update Pydantic models in src/domain/models/concept.py.","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T17:52:31.086350743Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T18:27:19.865977694Z","closed_at":"2026-01-25T18:27:19.865977694Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-7p8","depends_on_id":"interview-system-v2-8md","type":"blocks","created_at":"2026-01-25T17:52:43.77628716Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-7r7","title":"Task 6: Implement RichnessScorer","description":"Implement RichnessScorer from spec 3.6 - adapts to respondent engagement level based on response length","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T10:13:38.890878036Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:47:57.431330749Z","closed_at":"2026-01-24T00:47:57.431330749Z","close_reason":"Investigation complete: 0v4=already fixed (no async in UI), 05s=superseded by sequential modes, kl3=already implemented (YAML configs exist), 5iw=superseded by ADR-004 two-tier scoring, 7r7=implemented via EngagementScorer proxy"}
{"id":"interview-system-v2-7u8","title":"Spec 1.5: FastAPI Shell","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:28.762667004Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:04:17.602497451Z","closed_at":"2026-01-21T02:04:17.602497451Z","close_reason":"Verified by subagent","dependencies":[{"issue_id":"interview-system-v2-7u8","depends_on_id":"interview-system-v2-14r","type":"blocks","created_at":"2026-01-21T01:57:52.540426331Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-7u8","depends_on_id":"interview-system-v2-8gl","type":"blocks","created_at":"2026-01-21T01:57:52.785480594Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-7zo","title":"Implement new strategies: bridge, contrast, ease, synthesis","description":"Add 4 new strategies to config/scoring.yaml: bridge (peripheral), contrast (contrast), ease (interaction), synthesis (transition). Remove priority_base field, keep only id, name, type_category, enabled, prompt_hint.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:56.491517792Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T00:07:40.277072192Z","closed_at":"2026-01-23T00:07:40.277072192Z","close_reason":"Added 4 new strategies to config (bridge, contrast, ease, synthesis) with prompt_hint fields, removed priority_base from all strategies","dependencies":[{"issue_id":"interview-system-v2-7zo","depends_on_id":"interview-system-v2-q1n","type":"blocks","created_at":"2026-01-23T00:01:05.716238543Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-85d","title":"Implement remaining Tier 2 scorers: Engagement, StrategyDiversity, Novelty","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:57.995506483Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T00:05:51.989314009Z","closed_at":"2026-01-22T00:05:51.989314009Z","close_reason":"Two-tier scoring system implemented - see ADR-004"}
{"id":"interview-system-v2-865","title":"Replace hardcoded 0.0 scoring values with actual scorer calls in process_turn()","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:58:00.47438029Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T23:54:12.37239559Z","closed_at":"2026-01-21T23:54:12.37239559Z","close_reason":"Superseded by ADR-004: adopting two-tier hybrid scoring system instead of multiplicative Phase 3 approach"}
{"id":"interview-system-v2-89i","title":"Extraction Validation: Integrate schema validation","description":"Modify ExtractionService to load schema on init. Update _parse_concepts to validate node_type. Update _parse_relationships to validate edge_type and connections. Add unit tests for validation rejection.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T02:02:23.761782671Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T07:40:18.926859827Z","closed_at":"2026-01-23T07:40:18.926859827Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-89i","depends_on_id":"interview-system-v2-tqw","type":"blocks","created_at":"2026-01-23T02:02:36.945007907Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-8an","title":"Phase 3: Service Layer (mode-aware initialization)","description":"Mode-aware session initialization, strategy/scorer loading, concept validation. ~5% of codebase. See ADR-005 Phase 3.","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-22T11:52:08.125541619Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T12:20:04.088937977Z","closed_at":"2026-01-22T12:20:04.088937977Z","close_reason":"Phase 3 complete: Updated SessionService and StrategyService to be mode-aware. SessionContext now includes mode field, _load_context reads mode from session, and strategy selection accepts mode parameter.","dependencies":[{"issue_id":"interview-system-v2-8an","depends_on_id":"interview-system-v2-28p","type":"blocks","created_at":"2026-01-22T11:52:15.809457679Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-8gl","title":"Spec 1.4: Settings and Logging","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:28.44204267Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:00:22.73707478Z","closed_at":"2026-01-21T02:00:22.73707478Z","close_reason":"Verified by subagent"}
{"id":"interview-system-v2-8kc","title":"Fix max_depth: use chain traversal instead of node type count","description":"graph_repo.py:505 calculates max_depth as count of unique node types present, NOT the longest chain in the graph. A graph with disconnected [attribute, consequence, terminal_value] reports max_depth=3 — same as a fully connected 3-level chain.\n\nThis feeds into phase detection (interview_phase.py:60-86) and depth-based strategy scoring. The DepthCalculator service exists and does proper DFS traversal but is only used in the coverage subsystem — the top-level max_depth in GraphState bypasses it entirely.\n\nNote: Since the system is purely exploratory (no coverage mode), max_depth is the PRIMARY metric for depth-based strategy selection and phase transitions. Getting this right is essential.\n\nFix: Use DepthCalculator.get_max_depth() or equivalent graph traversal for GraphState.max_depth instead of len(nodes_by_type).\n\nFiles: src/persistence/repositories/graph_repo.py:505, src/services/depth_calculator.py","status":"closed","priority":0,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:13.192040128Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T01:22:30.26101234Z","closed_at":"2026-01-30T01:22:30.26101234Z","close_reason":"Fixed: max_depth now uses DepthCalculator DFS traversal instead of len(nodes_by_type). Commit 0a22a19."}
{"id":"interview-system-v2-8md","title":"Fix broken coverage comparison in graph_repo","description":"Coverage tracking compares node labels to element IDs (different namespaces). Fix graph_repo.py to compare element IDs properly. Add alias-based fuzzy matching in _load_concept_elements().","status":"closed","priority":0,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T17:52:31.077309472Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T18:27:19.855626129Z","closed_at":"2026-01-25T18:27:19.855626129Z","close_reason":"Closed"}
{"id":"interview-system-v2-8xa","title":"Implement ContrastOpportunityScorer","description":"Tier-2 scorer: if strategy.id==contrast and has_opposite and density\u003e0.6: score=1.5, elif has_opposite: score=1.2, else: 1.0","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:45.042661105Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T21:21:49.81295754Z","closed_at":"2026-01-24T21:21:49.81295754Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-8xa","depends_on_id":"interview-system-v2-44j","type":"blocks","created_at":"2026-01-23T00:01:06.242900903Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-94j","title":"Use orphan_count in scoring or strategy selection","description":"**UPGRADED from P4**: Phase detection's _get_orphan_count() always returns 0 (interview_phase.py:109-112), making the 'orphan_count \u003e 3' mid-phase condition dead code. Meanwhile GraphState.orphan_count IS correctly computed via SQL in graph_repo.py:490-501. The signal just never reads it.\n\nImpact: Phase detection reduces to pure node-count thresholds. Combined with broken max_depth (see separate issue), phase transitions are purely node-count driven.\n\nFix: In InterviewPhaseSignal._get_orphan_count(), read graph_state.orphan_count directly instead of falling through to return 0.","status":"closed","priority":0,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:18:22.106592537Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T07:51:33.950997274Z","closed_at":"2026-01-30T07:51:33.950997274Z","close_reason":"Fixed orphan_count wiring: simplified _get_orphan_count() to use getattr() directly, fixed max_depth access to read from depth_metrics.max_depth, updated all tests to remove extended_properties usage and add proper depth_metrics mocks. All tests pass."}
{"id":"interview-system-v2-9du","title":"Implement phase system in StrategyService","description":"Add phase property to GraphState with getters/setters. Implement _determine_phase() with turn_count and coverage_ratio logic. Add phase_profiles for exploratory/focused/closing modes.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:57.170864436Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T00:09:00.785258419Z","closed_at":"2026-01-23T00:09:00.785258419Z","close_reason":"Implemented 3-phase system with phase_profiles","dependencies":[{"issue_id":"interview-system-v2-9du","depends_on_id":"interview-system-v2-q1n","type":"blocks","created_at":"2026-01-23T00:01:06.985863864Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-9jo","title":"Phase 1: Eliminate Inline Database Connections","description":"Remove aiosqlite.connect() and get_db_connection() patterns from src/services/session_service.py. Replace with repository methods exclusively.","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:13:05.328427994Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.693774772Z","closed_at":"2026-01-23T10:32:27.693774772Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-9o4","title":"Implement Tier 1 scorers: KnowledgeCeiling, ElementExhausted, RecentRedundancy","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:57.464233911Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:42:50.248472288Z","closed_at":"2026-01-24T00:42:50.248472288Z","close_reason":"Implemented: (1) text_similarity.py with TFIDFCosineSimilarity class, (2) all 3 Tier1 scorers (knowledge_ceiling, element_exhausted, recent_redundancy) using text_similarity, (3) StrategySelectionStage integrated into SessionService pipeline. Blocked by yho now resolved.","dependencies":[{"issue_id":"interview-system-v2-9o4","depends_on_id":"interview-system-v2-yho","type":"blocks","created_at":"2026-01-21T23:54:10.149893314Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-9v4","title":"Phase 2: Convert Dict Parameters to Typed Models","description":"Replace Dict[str, Any] in strategy_service.py, question_service.py, session_service.py with typed models (Focus, TurnContext, TurnResult).","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:13:12.372888266Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.715891675Z","closed_at":"2026-01-23T10:32:27.715891675Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-a0n","title":"Spec 2.5: Graph Repository (aiosqlite CRUD for nodes/edges)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:31.500557102Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:36:54.927206185Z","closed_at":"2026-01-21T07:36:54.927210727Z","dependencies":[{"issue_id":"interview-system-v2-a0n","depends_on_id":"interview-system-v2-ag4","type":"blocks","created_at":"2026-01-21T07:19:15.083404333Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-a28","title":"Complete incomplete implementations (TODOs)","description":"Incomplete implementations identified:\n1. LLM-based hedging analysis in hedging_language.py - falls back to regex heuristics\n2. Template-based question generation in question_generation_stage.py - always uses LLM\n3. Discourse markers in extraction_service.py - extracted but never consumed\n4. extractability_criteria from schema - defined but hardcoded heuristics used instead\n5. Signal cost awareness in common.py - metadata exists but never used for optimization\nRef: jolly-dancing-wilkes.md Part 3 LOW PRIORITY","status":"open","priority":4,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:37:18.812217691Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:37:18.812217691Z","comments":[{"id":10,"issue_id":"interview-system-v2-a28","author":"michaelarutyunov","text":"## Sufficiency: GOOD (as backlog items)\n\nThese are genuine TODOs but intentionally deferred. Each would be its own feature.\n\n### Watch-outs \u0026 Risks:\n1. **LLM-based hedging analysis** — the regex heuristics may be good enough. Measure before replacing with expensive LLM call\n2. **Template-based question generation** — reduces LLM dependency but adds maintenance burden. Only worth doing if LLM latency is a real user problem\n3. **Discourse markers** — extracted but unused. Either consume them in a signal or stop extracting them (wasted tokens)\n4. **extractability_criteria** — the hardcoded heuristics work. Schema-based criteria adds complexity for marginal gain\n5. **Signal cost awareness** — premature optimization unless signal detection is measurably slow\n\n### Model guidance: **Mixed**\n- Hedging analysis LLM version: Sonnet (prompt engineering)\n- Template question generation: Opus (architecture decision about when to use templates vs LLM)\n- Discourse markers: Sonnet (wire to existing signal or remove extraction)\n- extractability_criteria: Sonnet (read from schema instead of hardcode)\n- Signal cost: Opus (optimization requires profiling and architectural changes)","created_at":"2026-02-02T15:07:43Z"}]}
{"id":"interview-system-v2-ag3","title":"Spec 1.1: Project Scaffolding","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:27.452691913Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T01:57:47.971671086Z","closed_at":"2026-01-21T01:57:47.971671086Z","close_reason":"Completed by subagent - all verification passed"}
{"id":"interview-system-v2-ag4","title":"Spec 2.1: Domain Models (KGNode, KGEdge, Utterance, Extraction)","status":"closed","priority":0,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:29.656376513Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:22:49.628653799Z","closed_at":"2026-01-21T07:22:49.628688466Z"}
{"id":"interview-system-v2-agm","title":"Phase 4: Meta signals and interview phasing","description":"Implement composite signals and phase-based configuration. Tasks: 1) Implement node.opportunity meta signal, 2) Implement interview.phase detection signal, 3) Add phase-based YAML configuration structure, 4) Update existing YAML configs with phase-based weights, 5) Tests for phase detection","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:14:57.025475519Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T07:46:44.35118028Z","closed_at":"2026-01-29T07:46:44.35118028Z","close_reason":"Closed"}
{"id":"interview-system-v2-ar0","title":"Implement dual sync/async API for APIClient","description":"Implement ADR-001: Add synchronous versions of all APIClient methods for Streamlit compatibility while preserving async versions for agent orchestration. See docs/adr/001-sync-async-dual-api.md","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T20:49:20.658589376Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T20:52:47.08550977Z","closed_at":"2026-01-21T20:52:47.08550977Z","close_reason":"Implemented dual sync/async API per ADR-001. APIClient now has:\n- Sync methods (create_session, submit_turn, etc.) using httpx.Client for Streamlit\n- Async methods (create_session_async, submit_turn_async, etc.) using httpx.AsyncClient for agents\n- Updated controls.py and streamlit_app.py to use sync methods\n- Removed all asyncio.run() wrappers from UI code"}
{"id":"interview-system-v2-at0","title":"P0: Fix ExtractionService methodology double-initialization","description":"ExtractionService initializes with hardcoded default methodology ('means_end_chain') at extraction_service.py:77, then ExtractionStage patches it at runtime. First turn of non-MEC sessions may extract with wrong schema. Fix: accept methodology at construction or ensure ExtractionStage always sets it before first use. Ref: jolly-dancing-wilkes.md Part 2D, Part 4 #1","status":"open","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:36:47.438008427Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:36:47.438008427Z","comments":[{"id":1,"issue_id":"interview-system-v2-at0","author":"michaelarutyunov","text":"## Sufficiency: NEEDS ENRICHMENT\n\nThe issue correctly identifies the problem but lacks implementation guidance.\n\n### What's missing:\n- ExtractionService is constructed in the DI/wiring layer (need to trace how it's injected into ExtractionStage)\n- ExtractionStage already patches methodology at runtime (extraction_stage.py:43-68), but the fix is fragile: uses hasattr checks and reloads schema mid-request\n- The real fix is: accept methodology as a required parameter in extract() call, not as mutable service state\n\n### Watch-outs \u0026 Risks:\n1. **ExtractionService is likely a singleton** — if shared across concurrent sessions with different methodologies, patching self.methodology is a race condition\n2. **Schema reload in extract stage** catches generic Exception and silently continues with wrong schema — a production bug that's hard to detect\n3. **Test gap**: no tests for non-MEC methodology extraction paths\n4. **The methodology param is marked DEPRECATED** in the docstring but still used — clean up the API contract\n\n### Files to touch:\n- src/services/extraction_service.py (lines 68-81)\n- src/services/turn_pipeline/stages/extraction_stage.py (lines 43-68)\n- Wherever ExtractionService is constructed (DI wiring)\n\n### Model guidance: **Sonnet-level** — straightforward refactoring, well-scoped. The key decision is whether to make methodology a per-call param or keep it as service state with proper locking.","created_at":"2026-02-02T15:06:34Z"},{"id":11,"issue_id":"interview-system-v2-at0","author":"michaelarutyunov","text":"## Design Decision (resolved)\n\n**Context**: This system runs one interview at a time — no concurrent sessions.\n\n**Decision**: Make methodology a REQUIRED constructor param on ExtractionService (no default). Remove the hardcoded 'means_end_chain' fallback. Remove the runtime patching logic in ExtractionStage (lines 43-68). Whoever constructs ExtractionService must pass the correct methodology upfront.\n\n**Rationale**: No concurrency risk, so mutable state isn't dangerous — but the current code is confusing with the DEPRECATED docstring and runtime patching. A required param is cleaner and prevents the \"first turn with wrong schema\" issue entirely.","created_at":"2026-02-02T18:18:00Z"},{"id":17,"issue_id":"interview-system-v2-at0","author":"michaelarutyunov","text":"## Implementation Decision (resolved)\n\n**Approach**: Per-call `methodology` parameter (Option 1B).\n\n**Implementation**:\n\n1. **extraction_service.py**:\n```python\n# Remove self.methodology and self.schema from __init__\n# Change extract() signature:\nasync def extract(\n    self,\n    response_text: str,\n    methodology: str,  # NEW: required parameter\n    concept_id: Optional[str] = None,\n) -\u003e Extraction:\n    \"\"\"Extract concepts using specified methodology schema.\"\"\"\n    schema = load_methodology(methodology)  # Load per-call (cached)\n    # ... rest of extraction logic\n```\n\n2. **extraction_stage.py**:\n```python\n# Remove runtime patching (lines 43-68)\n# Pass methodology from context:\nextraction = await self.extraction.extract(\n    response_text=context.user_input,\n    methodology=context.methodology,  # From session\n    concept_id=context.concept_id,\n)\n```\n\n**Rationale**: No mutable state, methodology explicit per call, cleaner than constructor pattern for singleton services. load_methodology() caches schemas so overhead is negligible.\n\n**Files**: \n- src/services/extraction_service.py (lines 45-81, 120-200)\n- src/services/turn_pipeline/stages/extraction_stage.py (lines 43-68, extract call site)\n","created_at":"2026-02-02T23:19:34Z"}]}
{"id":"interview-system-v2-atw","title":"Fix AmbiguityScorer to selectively boost strategies","description":"Modify AmbiguityScorer to boost clarify/rephrase strategies on confusion, NOT deepen/broaden. Current logic boosts all strategies equally.","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-26T11:59:59.021483817Z","created_by":"michaelarutyunov","updated_at":"2026-01-26T13:06:54.192746687Z","closed_at":"2026-01-26T13:06:54.192746687Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-atw","depends_on_id":"interview-system-v2-pe4","type":"blocks","created_at":"2026-01-26T12:00:05.801802239Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-b3r","title":"Implement Dual-Mode Interview Architecture (ADR-005)","description":"Implement dual-mode interview architecture with Coverage-Driven and Graph-Driven modes. Adds ~15% refactor for mode abstraction, state models, and configuration. See ADR-005 and docs/theory/coverage_approaches_analysis.md","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-22T11:51:52.620710708Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T21:14:16.03696558Z","closed_at":"2026-01-24T21:14:16.03696558Z","close_reason":"Deprecated - YAML-driven phasing with single coverage_driven mode is sufficient for current use cases. Dual-mode (coverage vs graph-driven) would add ~15% complexity without clear benefit. See ADR-005 deprecation notice.","dependencies":[{"issue_id":"interview-system-v2-b3r","depends_on_id":"interview-system-v2-oam","type":"blocks","created_at":"2026-01-22T11:52:20.677985314Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-b3r","depends_on_id":"interview-system-v2-28p","type":"blocks","created_at":"2026-01-22T11:52:20.935810196Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-b3r","depends_on_id":"interview-system-v2-8an","type":"blocks","created_at":"2026-01-22T11:52:21.190652615Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-b3r","depends_on_id":"interview-system-v2-kl3","type":"blocks","created_at":"2026-01-22T11:52:21.464070014Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-b3r","depends_on_id":"interview-system-v2-05s","type":"blocks","created_at":"2026-01-22T11:52:21.678088474Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-bbh","title":"Task 3: Synthetic Endpoint (Spec 4.3)","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T12:53:07.034743938Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T12:53:12.757206079Z","closed_at":"2026-01-21T12:53:12.757206079Z","close_reason":"Closed"}
{"id":"interview-system-v2-brd","title":"Spec 1.7: Session API Endpoints","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:29.397644859Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:07:05.358454303Z","closed_at":"2026-01-21T02:07:05.358454303Z","close_reason":"Verified - 9 tests pass","dependencies":[{"issue_id":"interview-system-v2-brd","depends_on_id":"interview-system-v2-7u8","type":"blocks","created_at":"2026-01-21T01:57:53.479119292Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-brd","depends_on_id":"interview-system-v2-mof","type":"blocks","created_at":"2026-01-21T01:57:53.730741482Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-c1r","title":"Task 8: Implement StrategyService","description":"Implement StrategyService from spec 3.8 - orchestrates strategy selection with focus generation","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T10:13:40.059228712Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:40:11.954977738Z","closed_at":"2026-01-24T00:40:11.954977738Z","close_reason":"Fixed by commit 313c209 - scoring metrics, edge extraction, and strategy selection fixes. Includes: (1) StrategyService implementation, (2) NoveltyScorer implementation, (3) coverage_state tracking in graph_repo, (4) AmbiguityScorer recent_nodes bug fix, (5) EngagementScorer threshold fix, (6) DepthBreadthBalanceScorer threshold fix"}
{"id":"interview-system-v2-cgd","title":"Implement saturation-based continuation logic","description":"continuation_stage.py:112-148 only stops when turn_number \u003e= max_turns or strategy == 'close'. There is no saturation detection or progress monitoring. Line 146 comments 'Phase 3 will add' these — they are unimplemented.\n\nAn interview producing zero new information for 10 consecutive turns continues until max_turns. This wastes tokens and degrades interview quality.\n\nNote: This system is purely exploratory (not evaluative), so there is NO coverage-driven mode. Continuation logic should focus entirely on graph-based saturation signals.\n\nFix: Add continuation checks for:\n- Graph saturation (no new nodes/edges for N consecutive turns)\n- Node exhaustion across all active nodes (all nodes exhausted = nothing left to explore)\n- Quality degradation (consecutive shallow responses)\n- Depth plateau (max_depth stops growing for N turns)\n\nDo NOT add coverage thresholds — they do not apply to exploratory research.\n\nFiles: src/services/turn_pipeline/stages/continuation_stage.py:112-148","status":"closed","priority":0,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:13.471077602Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T01:38:24.671778473Z","closed_at":"2026-01-30T01:38:24.671778473Z","close_reason":"Implemented 4 saturation checks in ContinuationStage: graph saturation (5 consecutive zero-yield turns), node exhaustion (all explored nodes exhausted), quality degradation (4 consecutive shallow turns), depth plateau (6 turns at same max_depth). Self-contained Approach A with Approach B comment for future SaturationMetrics migration. 7 tests added.","dependencies":[{"issue_id":"interview-system-v2-cgd","depends_on_id":"interview-system-v2-8kc","type":"blocks","created_at":"2026-01-30T01:11:41.285173777Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-ck2","title":"Cleanup: Remove hardcoded schema definitions","description":"Mark NodeType and EdgeType enums as deprecated or remove. Update documentation to reference YAML as source of truth. Run integration tests with full extraction pipeline.","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T02:02:24.43021842Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T07:45:48.482310706Z","closed_at":"2026-01-23T07:45:48.482310706Z","close_reason":"Phase 4 complete: Marked enums as deprecated, updated documentation to reference YAML schema, all unit tests passing","dependencies":[{"issue_id":"interview-system-v2-ck2","depends_on_id":"interview-system-v2-89i","type":"blocks","created_at":"2026-01-23T02:02:37.423602686Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-ck2","depends_on_id":"interview-system-v2-7lw","type":"blocks","created_at":"2026-01-23T02:02:37.597959232Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-d1h","title":"Fix post-interview issues: strategy, coverage, graph, export","description":"Issues found after first successful 20-turn interview:\n\n1. Strategy: UNKNOWN throughout interview\n2. Coverage: 0% throughout interview  \n3. Knowledge Graph: Empty (no nodes/edges)\n4. Export: APIClient has no _get_client attribute\n5. Question quality: Repetitive questions (see test01.txt)\n\nAll issues should be debugged systematically adhering to PRD without replacing logic with keywords/heuristics.","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:46:41.810958828Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:40:11.932804391Z","closed_at":"2026-01-24T00:40:11.932804391Z","close_reason":"Fixed by commit 313c209 - scoring metrics, edge extraction, and strategy selection fixes. Includes: (1) StrategyService implementation, (2) NoveltyScorer implementation, (3) coverage_state tracking in graph_repo, (4) AmbiguityScorer recent_nodes bug fix, (5) EngagementScorer threshold fix, (6) DepthBreadthBalanceScorer threshold fix"}
{"id":"interview-system-v2-d2y","title":"Implement Tier 2 scorers: CoverageGap, Ambiguity, DepthBreadthBalance","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:57.729911865Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T00:05:51.985146884Z","closed_at":"2026-01-22T00:05:51.985146884Z","close_reason":"Two-tier scoring system implemented - see ADR-004"}
{"id":"interview-system-v2-d62","title":"Enhance AmbiguityScorer with LLM","description":"Refactor AmbiguityScorer to use llm_light for ambiguity detection. Prompt analyzes respondent text for hedge words, uncertainty markers, extraction confidence. Returns ambiguity 0-1, converts to raw_score bands (0.9/1.2/1.5).","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:56.72821933Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T20:55:15.538545057Z","closed_at":"2026-01-24T20:55:15.538545057Z","close_reason":"Implemented in Phase 2 and P2 blockers work","dependencies":[{"issue_id":"interview-system-v2-d62","depends_on_id":"interview-system-v2-0il","type":"blocks","created_at":"2026-01-23T00:01:06.743576781Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-din","title":"Update methodology schema model for new structure","description":"Update MethodologySchema, NodeTypeSpec to support: 1) method metadata dict, 2) ontology section with nodes/edges, 3) level and terminal fields on NodeTypeSpec, 4) get_terminal_node_types() and get_level_for_node_type() methods","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:29.254066426Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T12:55:12.006634133Z","closed_at":"2026-01-29T12:55:12.006634133Z","close_reason":"Closed"}
{"id":"interview-system-v2-dl2","title":"Implement focus generation logic for missing strategies (bridge, contrast, ease, synthesis)","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T19:00:53.651890033Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T20:55:15.529116484Z","closed_at":"2026-01-24T20:55:15.529116484Z","close_reason":"Implemented in Phase 2 and P2 blockers work"}
{"id":"interview-system-v2-dlm","title":"Phase 6: Testing, calibration, and signal weight tuning","description":"Comprehensive testing and calibration of the node exhaustion system. Tasks: 1) Synthetic interviews with various scenarios (exhaustion, backtracking, uncertainty), 2) Signal weight tuning in YAML configs, 3) Validate exhaustion detection accuracy, 4) Validate backtracking behavior, 5) Performance testing, 6) Documentation updates","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:14:59.268720053Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T08:18:55.241523889Z","closed_at":"2026-01-29T08:18:55.241523889Z","close_reason":"Closed"}
{"id":"interview-system-v2-dxo","title":"Delete empty utils/ module and add request correlation IDs","description":"Two cleanup items:\n\n1. src/utils/__init__.py: Directory contains only empty __init__.py. No utilities exist. Delete directory.\n\n2. No request correlation IDs in logs. Multi-turn session debugging requires manually correlating log entries by timestamp. Add FastAPI middleware that generates a request_id and binds it to structlog context for all logs in that request.\n\nFiles: src/utils/__init__.py (delete), src/main.py (add middleware)","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:16.669787492Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:08:20.451795086Z","closed_at":"2026-01-30T14:08:20.451795086Z","close_reason":"2c1: Removed deprecated GraphState enums (NodeType, EdgeType), deprecated phase computed property, and deprecated get_phase()/set_phase() methods. Updated tests to use current_phase directly.\\n\\ndxo: Deleted empty src/utils/ directory. Added CorrelationIDMiddleware to main.py that generates UUID4 request_id, binds to structlog context, and adds X-Request-ID header to responses."}
{"id":"interview-system-v2-dy6","title":"Add opening_bias to methodology schema and improve opening question generation","description":"Implement methodology-specific opening_bias field and update opening question generation to use methodology context, opening guidance, and concrete elicitation strategies.\n\nChanges:\n1. Add opening_bias field to methodology schema method section\n2. Update methodology YAMLs with opening_bias (means_end_chain, jobs_to_be_done, etc.)\n3. Refactor opening question prompt to use methodology context\n4. Update QuestionService to pass objective and methodology to prompt\n5. Update SessionService.start_session() to extract objective from concept.task\n6. Rename concept.task field to concept.objective\n7. Add get_opening_question_user_prompt() with new methodology-aware structure\n\nThe new prompt should:\n- Use methodology name and goal for context\n- Use opening_bias for method-specific guidance\n- Elicit concrete, experience-based responses\n- Generate only what the moderator would say (no meta-commentary)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T15:46:04.055956532Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T15:59:08.541222688Z","closed_at":"2026-01-29T15:59:08.541222688Z","close_reason":"Closed"}
{"id":"interview-system-v2-ekm","title":"Implement ClusterSaturationScorer","description":"Tier-2 scorer: if strategy.id==synthesis and saturation\u003e0.7: score=1.5, elif saturation\u003e0.4: score=1.2, else: 1.0","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:45.225551885Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T21:21:49.804916663Z","closed_at":"2026-01-24T21:21:49.804916663Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-ekm","depends_on_id":"interview-system-v2-7zo","type":"blocks","created_at":"2026-01-23T00:01:05.970363915Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-epa","title":"Task 1: Synthetic Prompts (Spec 4.1)","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T12:32:36.439187999Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T12:32:44.857422182Z","closed_at":"2026-01-21T12:32:44.857422182Z","close_reason":"Closed"}
{"id":"interview-system-v2-etj","title":"Fix export functionality - APIClient._get_client missing","description":"Export fails with 'APIClient' object has no attribute '_get_client'. The _render_export method tries to access api_client._get_client() which doesn't exist. APIClient uses context managers (with httpx.Client) not a cached _get_client method.","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:47:05.209562046Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T22:48:20.324746598Z","closed_at":"2026-01-21T22:48:20.324746598Z","close_reason":"Fixed by replacing api_client._get_client() with correct 'with httpx.Client() as client:' pattern matching the rest of the refactored APIClient"}
{"id":"interview-system-v2-fm6","title":"Use concrete types instead of Optional[Any] in PipelineContext","description":"Pipeline context (context.py:47-74) uses Optional[Any] for all contract outputs (context_loading_output, extraction_output, etc.). Concrete contract types exist in pipeline_contracts.py but are not used. This defeats type checking and makes contract violations invisible until runtime.\n\nFix: Replace Optional[Any] with Optional[ContextLoadingOutput], Optional[ExtractionOutput], etc.\n\nFiles: src/services/turn_pipeline/context.py:47-74, src/domain/models/pipeline_contracts.py","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:16.478304734Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:53:58.31680466Z","closed_at":"2026-01-30T13:53:58.31680466Z","close_reason":"All 4 beads implemented successfully:\\n\\nfm6: Replaced all Optional[Any] with concrete types in PipelineContext (ContextLoadingOutput, UtteranceSavingOutput, ExtractionOutput, etc.) for proper type safety.\\n\\np6w: Modified record_yield() to count nodes_modified as yield (full 1.0x yield as specified). Added nodes_modified to yield detection condition and logging.\\n\\n4x1: Added phase_bonuses to PhaseConfig dataclass and YAML loader. Modified rank_strategies() and rank_strategy_node_pairs() to apply additive bonuses: final_score = (base_score * multiplier) + bonus. Added example phase_bonuses to means_end_chain.yaml.\\n\\n7o6: Created tests/conftest.py with test_db fixture. Converted test_session_service.py to use real database with mocked LLM services. Fixed SessionState creation to include required fields (methodology, concept_id, concept_name). Fixed graph repo method call. 15 tests passing."}
{"id":"interview-system-v2-fp0","title":"Spec 2.8: Question Service (generates follow-up questions)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:51.164356246Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:44:12.947487723Z","closed_at":"2026-01-21T07:44:12.947487723Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-fp0","depends_on_id":"interview-system-v2-rk9","type":"blocks","created_at":"2026-01-21T07:19:16.663028137Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-fp0","depends_on_id":"interview-system-v2-5mv","type":"blocks","created_at":"2026-01-21T07:19:16.971137426Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-fr4","title":"Add YAML methodology config schema validation","description":"YAML methodology configs have no schema validation. Typos in signal names silently become zero-weighted signals. No check that referenced signals match actual signal detectors in the registry. Add validation in registry.py on load. Ref: jolly-dancing-wilkes.md Part 2E, Part 4 #3","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:36:51.254006782Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T18:33:52.432235694Z","closed_at":"2026-02-02T18:33:52.432235694Z","close_reason":"Implemented load-time YAML validation in MethodologyRegistry. Fixed 3 YAML config bugs (graph.edge_density, validate strategy ref). 27 new tests.","comments":[{"id":3,"issue_id":"interview-system-v2-fr4","author":"michaelarutyunov","text":"## Sufficiency: NEEDS ENRICHMENT\n\nThe issue identifies the problem but doesn't specify what validation to add.\n\n### Current state:\n- registry.py loads YAML with yaml.safe_load(), no schema validation\n- Signal names validated at runtime when ComposedSignalDetector is created (signals/registry.py:164 raises ValueError)\n- But strategy signal_weights keys are NEVER validated — typo like 'grph.node_count' silently scores as 0\n- Phase names and strategy names also unvalidated\n- 5 YAML configs in config/methodologies/\n\n### What validation to add:\n1. Signal names in signal_weights must exist in SignalDetectorRegistry._signal_registry\n2. Technique names must match known techniques (laddering, elaboration, probing, validation)\n3. Phase names should be documented/constrained\n4. signal_norms keys should match signal names\n5. Strategy names should be unique within a methodology\n\n### Watch-outs \u0026 Risks:\n1. **Circular import risk** — registry.py importing from signals/registry.py\n2. **Load-time vs runtime validation** — validating at load time means all configs must be valid at startup\n3. **Compound signal keys** (e.g., 'llm.response_depth.surface') need special validation — base signal is 'llm.response_depth'\n4. **signal_norms is optional** — validation should warn-not-fail for missing norms\n\n### Files to touch:\n- src/methodologies/registry.py (main validation logic)\n- src/methodologies/signals/registry.py (expose list of registered signal names)\n\n### Model guidance: **Opus-level** — requires understanding compound signal key format, two-tier signal registry, and design decisions about validation strictness. Risk of breaking existing configs.","created_at":"2026-02-02T15:06:35Z"},{"id":12,"issue_id":"interview-system-v2-fr4","author":"michaelarutyunov","text":"## Design Decisions (resolved)\n\n**Validation timing**: Load-time. Validate when MethodologyRegistry.get_methodology() loads the YAML. If invalid, raise ValueError with clear message. All 5 configs must be valid.\n\n**Signal_weights strictness**: Prefix validation. For compound keys like 'llm.response_depth.surface', validate that the base signal 'llm.response_depth' is registered in SignalDetectorRegistry. Don't validate the compound suffix — it represents a signal value, not a signal name.\n\n**Implementation notes**:\n- After yaml.safe_load() and config construction, call a validate() method\n- Import SignalDetectorRegistry (may need lazy import to avoid circular deps)\n- Validate: signal names in signals dict, signal prefixes in strategy signal_weights, technique names against known techniques, strategy name uniqueness\n- signal_norms validation ties to t19 (require all norms) — validate norms cover all numeric signals","created_at":"2026-02-02T18:18:01Z"}]}
{"id":"interview-system-v2-g10","title":"Add LLM retry logic with exponential backoff","description":"LLM client calls (client.py) do not implement retry on transient failures. A single network hiccup or rate limit fails the entire turn. Production LLM integrations typically use exponential backoff with 2-3 retries and jitter.\n\nFix: Add retry decorator or tenacity-based retry to LLM call methods with configurable max_retries and backoff.\n\nFiles: src/llm/client.py","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:16.777223124Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:53:56.086368742Z","closed_at":"2026-01-30T14:53:56.086368742Z","close_reason":"Deprecated - production hardening, not critical for current development phase"}
{"id":"interview-system-v2-h2h","title":"Fix SessionService database access bugs","description":"Backend 500 error on /sessions/{id}/start endpoint.\n\nRoot causes:\n1. session.config.get() - Session model has concept_name as direct attribute, not nested in config\n2. session_repo.db.execute() - SessionRepository doesn't expose db attribute\n\nFixes:\n1. Changed session.config.get('concept_name') to session.concept_name\n2. Changed session_repo.db access to use get_db_connection() for utterance operations\n3. Fixed in _save_utterance() and _get_recent_utterances() methods","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:14:34.973334037Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T22:23:02.167942001Z","closed_at":"2026-01-21T22:23:02.167942001Z","close_reason":"Fixed multiple bugs: session.config access, session_repo.db access, session.update() → update_state(), and missing scoring fields (coverage, depth, saturation)"}
{"id":"interview-system-v2-hq8","title":"Consolidate methodology files and add hierarchy support","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:20.557948886Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T13:02:52.448804116Z","closed_at":"2026-01-29T13:02:52.448804116Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-hq8","depends_on_id":"interview-system-v2-din","type":"blocks","created_at":"2026-01-29T12:21:52.111297621Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-hq8","depends_on_id":"interview-system-v2-p3h","type":"blocks","created_at":"2026-01-29T12:21:52.33220626Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-hq8","depends_on_id":"interview-system-v2-zfy","type":"blocks","created_at":"2026-01-29T12:21:52.536779292Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-hq8","depends_on_id":"interview-system-v2-5nq","type":"blocks","created_at":"2026-01-29T12:21:52.810967228Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-hq8","depends_on_id":"interview-system-v2-kl7","type":"blocks","created_at":"2026-01-29T12:21:53.0639384Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-hq8","depends_on_id":"interview-system-v2-54p","type":"blocks","created_at":"2026-01-29T12:21:53.306885676Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-htl","title":"Fix strategy display - always shows UNKNOWN","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:47:06.05636506Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:40:11.945541246Z","closed_at":"2026-01-24T00:40:11.945541246Z","close_reason":"Fixed by commit 313c209 - scoring metrics, edge extraction, and strategy selection fixes. Includes: (1) StrategyService implementation, (2) NoveltyScorer implementation, (3) coverage_state tracking in graph_repo, (4) AmbiguityScorer recent_nodes bug fix, (5) EngagementScorer threshold fix, (6) DepthBreadthBalanceScorer threshold fix"}
{"id":"interview-system-v2-i0e","title":"Phase 2: Add Service Interfaces (Protocols)","description":"Create src/services/protocols.py with IExtractionService, IGraphService, IQuestionService protocols.","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:13:10.068101798Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.709445564Z","closed_at":"2026-01-23T10:32:27.709445564Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-i3p","title":"Phase 1: Fix Layer Violations - Create UtteranceRepository","description":"Create UtteranceRepository in src/persistence/repositories/utterance_repo.py with methods: save(), get_recent(), get_by_turn(). Remove inline utterance SQL from src/services/session_service.py (lines 608-627, 642-658). Add get_utterance_repository() to src/api/dependencies.py.","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:11:23.853627048Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.667685292Z","closed_at":"2026-01-23T10:32:27.667685292Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-id4","title":"Add semantic node deduplication","description":"Implement semantic similarity-based node deduplication. Current exact label match creates separate nodes for 'trust' vs 'trustworthiness'. Options: embedding similarity, LLM judgment, WordNet/synonyms, or periodic post-interview merge. Inflates node_count, breaks MEC chains, reduces cluster quality.","status":"open","priority":3,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:14:59.906064249Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T00:14:59.906064249Z","comments":[{"id":19,"issue_id":"interview-system-v2-id4","author":"michaelarutyunov","text":"AMBIGUITY: Similarity detection method not specified. Need to choose between:\n1. Embedding-based (fast, ~50ms for 100 nodes, requires sentence-transformers)\n2. LLM-based (accurate, expensive N² LLM calls)\n3. Hybrid: Embedding filter + LLM validation (balanced, ~10 LLM calls per turn)\n4. WordNet synonyms (free, limited to single words)\n\nRecommendation from analysis: Option 3 (Hybrid) with embedding threshold=0.75 for filtering, then LLM validation of candidates. Implement as new pipeline stage after GraphUpdateStage.\n\nAlso need decisions on:\n- Similarity threshold (0.75-0.85 for embeddings)\n- Merge strategy (which node to keep, how to handle edges/references)\n- When to deduplicate (real-time vs batch)\n- Scope (same node_type only or cross-type)","created_at":"2026-02-02T23:27:31Z"}]}
{"id":"interview-system-v2-ipt","title":"Replace assert with explicit validation in pipeline stages","description":"Pipeline stages use assert statements (e.g., strategy_selection_stage.py:163) which are disabled with python -O. Replace with explicit ValueError/RuntimeError raises. Ref: jolly-dancing-wilkes.md Part 1B, Part 4 #2","status":"open","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:36:48.613229805Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:36:48.613229805Z","comments":[{"id":2,"issue_id":"interview-system-v2-ipt","author":"michaelarutyunov","text":"## Sufficiency: GOOD (minor enrichment)\n\nOnly 1 assert found in pipeline stages — strategy_selection_stage.py:163.\n\n### Watch-outs \u0026 Risks:\n1. **Low blast radius** — only 1 assert in stages. But check other src/ code for asserts too\n2. **Replacement pattern**: raise ValueError or a custom PipelineValidationError — be consistent\n3. **ADR-009 says fail-fast** — replacement should still fail fast, just not via assert\n4. **Don't over-scope** — only replace existing asserts, don't add new validation\n\n### Files to touch:\n- src/services/turn_pipeline/stages/strategy_selection_stage.py (line 163)\n- Scan for asserts in other src/ files\n\n### Model guidance: **Sonnet-level** (or Haiku). Simple search-and-replace with better error messages.","created_at":"2026-02-02T15:06:35Z"},{"id":15,"issue_id":"interview-system-v2-ipt","author":"michaelarutyunov","text":"## Implementation Decision (resolved)\n\n**Exception type**: Use `ValueError` (stdlib, semantically correct for invalid data).\n\n**Replacement pattern**:\n```python\n# Replace:\nassert context.graph_state is not None, \"graph_state must be set by StateComputationStage\"\n\n# With:\nif context.graph_state is None:\n    raise ValueError(\n        \"Pipeline contract violation: graph_state must be set by \"\n        \"StateComputationStage before StrategySelectionStage\"\n    )\n```\n\n**Scope**: Replace the single assert at strategy_selection_stage.py:163. Scan for other asserts in src/ but only replace existing ones (don't add new validation).\n","created_at":"2026-02-02T23:19:10Z"}]}
{"id":"interview-system-v2-iy7","title":"Task 6: Package Exports","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T13:31:59.874256706Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T13:32:06.112204375Z","closed_at":"2026-01-21T13:32:06.112204375Z","close_reason":"Closed"}
{"id":"interview-system-v2-jxm","title":"Remove redundant min_turns gate from closing strategy","status":"closed","priority":3,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T19:00:52.473394444Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T20:55:15.540971879Z","closed_at":"2026-01-24T20:55:15.540971879Z","close_reason":"Implemented in Phase 2 and P2 blockers work"}
{"id":"interview-system-v2-jyr","title":"Phase 2: Define Core Domain Objects","description":"Create src/domain/models/turn.py with TurnContext, Focus, TurnResult models using Pydantic BaseModel.","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:13:07.47569192Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.701298948Z","closed_at":"2026-01-23T10:32:27.701298948Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-k3j","title":"Spec 1.8: Integration Test","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:29.721395563Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:10:21.107853383Z","closed_at":"2026-01-21T02:10:21.107853383Z","close_reason":"Complete - 56 tests pass","dependencies":[{"issue_id":"interview-system-v2-k3j","depends_on_id":"interview-system-v2-mof","type":"blocks","created_at":"2026-01-21T01:57:53.989388881Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-k3j","depends_on_id":"interview-system-v2-brd","type":"blocks","created_at":"2026-01-21T01:57:54.22905684Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-kdf","title":"Spec 2.4: Extraction Service (orchestrates LLM extraction)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:31.052259426Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:28:13.328825743Z","closed_at":"2026-01-21T07:28:13.328829939Z","dependencies":[{"issue_id":"interview-system-v2-kdf","depends_on_id":"interview-system-v2-rk9","type":"blocks","created_at":"2026-01-21T07:19:14.348832426Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-kdf","depends_on_id":"interview-system-v2-z9o","type":"blocks","created_at":"2026-01-21T07:19:14.599657468Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-kl3","title":"Phase 4: Configuration Files (YAML for both modes)","description":"Create coverage_driven.yaml and graph_driven.yaml configs for strategies and scoring. ~3% of codebase. See ADR-005 Phase 4.","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-22T11:52:08.870504341Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:47:57.42652725Z","closed_at":"2026-01-24T00:47:57.42652725Z","close_reason":"Investigation complete: 0v4=already fixed (no async in UI), 05s=superseded by sequential modes, kl3=already implemented (YAML configs exist), 5iw=superseded by ADR-004 two-tier scoring, 7r7=implemented via EngagementScorer proxy","dependencies":[{"issue_id":"interview-system-v2-kl3","depends_on_id":"interview-system-v2-8an","type":"blocks","created_at":"2026-01-22T11:52:16.080054969Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-kl7","title":"Deprecate CoverageBreadthSignal and MissingTerminalValueSignal","description":"Remove or mark deprecated: 1) CoverageBreadthSignal (not meaningful for exploratory), 2) MissingTerminalValueSignal (replaced by chain completion). Remove from signal registry and methodology configs.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:30.583451944Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T13:02:17.898194041Z","closed_at":"2026-01-29T13:02:17.898194041Z","close_reason":"Closed"}
{"id":"interview-system-v2-kxo","title":"Task 4: Test Script (Spec 4.4)","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T13:06:48.888502062Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T13:06:53.720993413Z","closed_at":"2026-01-21T13:06:53.720993413Z","close_reason":"Closed"}
{"id":"interview-system-v2-kyr","title":"Task 7: Final Integration Tests","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T13:36:55.437392938Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T13:37:06.770586308Z","closed_at":"2026-01-21T13:37:06.770586308Z","close_reason":"Closed"}
{"id":"interview-system-v2-m3g","title":"Phase 3: Extract Turn Pipeline Stages","description":"Create src/services/turn_pipeline/ directory with base.py, pipeline.py, and 10 stage files for turn processing pipeline.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:13:14.552052829Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.722287402Z","closed_at":"2026-01-23T10:32:27.722287402Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-m4i","title":"Track consecutive exhaustion signals and force strategy change","description":"Track 3+ consecutive exhaustion signals (nothing/else/dont know) and force strategy change to synthesis/laddering/broaden. From session_05a609ac.json ID2.","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:45:10.639194017Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T01:03:50.378176774Z","closed_at":"2026-01-25T01:03:50.378176774Z","close_reason":"Closed"}
{"id":"interview-system-v2-m4l","title":"Fix session start flow and missing endpoints","description":"Bug: Interview not starting, 404 errors for /status and /graph endpoints.\n\nRoot causes:\n1. UI wasn't calling /sessions/{id}/start after creating session\n2. /sessions/{id}/status endpoint doesn't exist in backend\n3. /sessions/{id}/graph endpoint doesn't exist in backend\n\nFixes:\n1. Added start_session() and start_session_async() methods to APIClient\n2. Updated _create_session() to call start_session() and get opening question\n3. Made get_session_status/get_session_graph return default data instead of 404\n4. Opening question now displayed in chat after session creation","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T21:22:40.546132343Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T21:22:47.638266895Z","closed_at":"2026-01-21T21:22:47.638266895Z","close_reason":"Fixed session start flow and made endpoints gracefully handle missing backend routes"}
{"id":"interview-system-v2-mkh","title":"Validate API keys at application startup, not first use","description":"LLM client (client.py:156) only validates API keys when a call is first made, not at app startup. An operator could start the system, run 5+ minutes of session setup, and only discover the missing key on first extraction call.\n\nFix: Add API key validation in FastAPI lifespan startup handler (main.py). Fail fast with clear error message.\n\nFiles: src/llm/client.py:156, src/main.py","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:17.917857728Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:10:04.056951353Z","closed_at":"2026-01-30T13:10:04.056951353Z","close_reason":"All three bugs fixed:\\n\\np38: Added find_node_by_label_and_type() method to GraphRepository and updated GraphService to use type-aware deduplication. Old find_node_by_label() deprecated with warning comment.\\n\\nzv9: Replaced assert statements with explicit RuntimeError raises in GraphRepository.create_node() and create_edge().\\n\\nmkh: Added validate_api_keys() function in main.py that validates all configured LLM provider API keys at application startup (in lifespan handler before database init)."}
{"id":"interview-system-v2-mof","title":"Spec 1.6: Session Repository","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:29.086860279Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:04:17.608762633Z","closed_at":"2026-01-21T02:04:17.608762633Z","close_reason":"Verified by subagent","dependencies":[{"issue_id":"interview-system-v2-mof","depends_on_id":"interview-system-v2-z44","type":"blocks","created_at":"2026-01-21T01:57:53.048790847Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-mof","depends_on_id":"interview-system-v2-14r","type":"blocks","created_at":"2026-01-21T01:57:53.228930756Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-nu6","title":"Spec 2.6: Graph Service (business logic for graph operations)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:50.180644522Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:44:12.940937623Z","closed_at":"2026-01-21T07:44:12.940937623Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-nu6","depends_on_id":"interview-system-v2-a0n","type":"blocks","created_at":"2026-01-21T07:19:15.591907059Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-oam","title":"Phase 1: Abstraction Layer (InterviewState base class)","description":"Create InterviewState abstract base class with CoverageState and EmergenceState implementations. ~5% of codebase. See ADR-005 Phase 1.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-22T11:52:06.535047384Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T11:56:29.535380179Z","closed_at":"2026-01-22T11:56:29.535380179Z","close_reason":"Phase 1 complete: Created InterviewState abstraction layer with CoverageState and EmergenceState implementations in src/domain/models/interview_state.py"}
{"id":"interview-system-v2-oc7","title":"Replace ArbitrationEngine with TwoTierScoringEngine in StrategyService","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:58.567549874Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T00:05:58.727666434Z","closed_at":"2026-01-22T00:05:58.727666434Z","close_reason":"Two-tier system implemented - Tier 1 scorers still pending (TF-IDF similarity needed first)","dependencies":[{"issue_id":"interview-system-v2-oc7","depends_on_id":"interview-system-v2-4fl","type":"blocks","created_at":"2026-01-21T23:54:10.440641007Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-oc7","depends_on_id":"interview-system-v2-9o4","type":"blocks","created_at":"2026-01-21T23:54:10.717954069Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-oc7","depends_on_id":"interview-system-v2-d2y","type":"blocks","created_at":"2026-01-21T23:54:10.996103157Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-oc7","depends_on_id":"interview-system-v2-85d","type":"blocks","created_at":"2026-01-21T23:54:11.255474169Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-oc7","depends_on_id":"interview-system-v2-yji","type":"blocks","created_at":"2026-01-21T23:54:11.541964679Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-oer","title":"ADR-007: YAML-Based Methodology Schema","description":"Externalize extraction schema to YAML config files with dynamic loading and validation. Fixes fragmentation across 3 files, adds validation enforcement, enables multi-methodology support. See docs/adr/007-yaml-based-methodology-schema.md","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T02:02:24.731718511Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T07:45:58.34502037Z","closed_at":"2026-01-23T07:45:58.34502037Z","close_reason":"ADR-007 complete: All phases finished. Schema externalized to YAML, validation enforced, documentation updated, 46 tests passing","dependencies":[{"issue_id":"interview-system-v2-oer","depends_on_id":"interview-system-v2-ck2","type":"blocks","created_at":"2026-01-23T02:02:37.91594082Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-p38","title":"Add node_type awareness to graph deduplication","description":"graph_service.py:139 deduplicates nodes by label only (case-insensitive). If LLM extracts 'sustainability' as attribute in turn 1 and as terminal_value in turn 5, they merge into one node. In MEC, different abstraction levels are semantically distinct — this corrupts chain structure.\n\nNote: This is distinct from semantic dedup (interview-system-v2-id4). This is about preventing type-level merge errors.\n\nFix: Change find_node_by_label to also match on node_type, or at minimum warn when types differ.\n\nFiles: src/services/graph_service.py:139, src/persistence/repositories/graph_repo.py","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:17.330674338Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:10:04.040118557Z","closed_at":"2026-01-30T13:10:04.040118557Z","close_reason":"All three bugs fixed:\\n\\np38: Added find_node_by_label_and_type() method to GraphRepository and updated GraphService to use type-aware deduplication. Old find_node_by_label() deprecated with warning comment.\\n\\nzv9: Replaced assert statements with explicit RuntimeError raises in GraphRepository.create_node() and create_edge().\\n\\nmkh: Added validate_api_keys() function in main.py that validates all configured LLM provider API keys at application startup (in lifespan handler before database init)."}
{"id":"interview-system-v2-p3h","title":"Merge methodology files (ontology + operational)","description":"Consolidate config/methodologies/*.yaml and src/methodologies/config/*.yaml into single config/methodologies/*.yaml files with new structure: method, ontology (nodes with level/terminal, edges with permitted_connections), signals, strategies, phases","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:29.606829708Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T12:55:12.019850848Z","closed_at":"2026-01-29T12:55:12.019850848Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-p3h","depends_on_id":"interview-system-v2-din","type":"blocks","created_at":"2026-01-29T12:21:41.51173609Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-p6w","title":"Count refinements as yield in node state tracker","description":"node_state_tracker.py:197 only records yield when new nodes or edges are added (nodes_added \u003e 0 or edges_added \u003e 0). Clarification and validation strategies refine existing relationships without creating new graph elements, so they register as zero yield, triggering false exhaustion signals.\n\nFix: Track nodes_modified in GraphChangeSummary and count modifications as partial yield. Consider adding a 'refinement_yield' metric separate from 'creation_yield'.\n\nFiles: src/services/node_state_tracker.py:196-203","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:16.161304228Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:53:58.328813759Z","closed_at":"2026-01-30T13:53:58.328813759Z","close_reason":"All 4 beads implemented successfully:\\n\\nfm6: Replaced all Optional[Any] with concrete types in PipelineContext (ContextLoadingOutput, UtteranceSavingOutput, ExtractionOutput, etc.) for proper type safety.\\n\\np6w: Modified record_yield() to count nodes_modified as yield (full 1.0x yield as specified). Added nodes_modified to yield detection condition and logging.\\n\\n4x1: Added phase_bonuses to PhaseConfig dataclass and YAML loader. Modified rank_strategies() and rank_strategy_node_pairs() to apply additive bonuses: final_score = (base_score * multiplier) + bonus. Added example phase_bonuses to means_end_chain.yaml.\\n\\n7o6: Created tests/conftest.py with test_db fixture. Converted test_session_service.py to use real database with mocked LLM services. Fixed SessionState creation to include required fields (methodology, concept_id, concept_name). Fixed graph repo method call. 15 tests passing."}
{"id":"interview-system-v2-pby","title":"Phase 1: Fix API Layer Violations","description":"Remove raw SQL from src/api/routes/sessions.py: get_session_status() (lines 277-322) move to SessionService.get_status(), get_turn_scoring() (lines 375-427) move to ScoringService.get_turn_scoring().","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:12:53.721359936Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.68566741Z","closed_at":"2026-01-23T10:32:27.68566741Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-pdy","title":"Remove high-priority dead code (SignalState, assess_extractability, SelectionResult)","description":"Three dead code items safe to remove:\n1. SignalState class in signals/common.py - deprecated, zero references\n2. assess_extractability() in extraction_service.py - never called, marked 'Skipping for v2 MVP'\n3. SelectionResult class in domain/models/turn.py + selection_result property in context.py - never populated, always returns None\nRef: jolly-dancing-wilkes.md Part 3 HIGH PRIORITY","status":"open","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:37:06.509163875Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:37:06.509163875Z","comments":[{"id":8,"issue_id":"interview-system-v2-pdy","author":"michaelarutyunov","text":"## Sufficiency: GOOD\n\n### Items to remove:\n1. **SignalState** class in signals/common.py:84-91 — zero references, docstring says deprecated\n2. **assess_extractability()** in extraction_service.py — never called, comment says \"Skipping for v2 MVP\"\n3. **SelectionResult** class in domain/models/turn.py:155-166 — never populated\n4. **selection_result** property in context.py — always returns None\n\n### Watch-outs \u0026 Risks:\n1. **SelectionResult is imported in 4 files** (context.py, strategy_selection_stage.py, session_service.py, scoring_persistence_stage.py) — need to remove all references, not just the class\n2. **assess_extractability has test coverage?** — check tests/ for references before removing\n3. **SignalState may be imported in __init__.py** re-exports — check signals/__init__.py\n4. **selection_result property removal** may break any code that accesses context.selection_result — grep for all usages\n\n### Verification:\n```bash\ngrep -rn \"SignalState\" src/ tests/\ngrep -rn \"assess_extractability\" src/ tests/\ngrep -rn \"SelectionResult\" src/ tests/\ngrep -rn \"selection_result\" src/ tests/\n```\n\n### Model guidance: **Sonnet-level** (or Haiku). Mechanical deletion with grep verification. Run tests after each removal to catch breakage.","created_at":"2026-02-02T15:07:19Z"}]}
{"id":"interview-system-v2-pe4","title":"Fix deepening on user confusion","description":"Implement veto logic: when user expresses confusion (conceptual_clarity severity \u003e 0.3), prevent deepen/switch strategies. Add ClarificationVetoScorer to Tier 1.","status":"closed","priority":0,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-26T11:59:57.261716459Z","created_by":"michaelarutyunov","updated_at":"2026-01-26T13:04:23.926431905Z","closed_at":"2026-01-26T13:04:23.926431905Z","close_reason":"Closed"}
{"id":"interview-system-v2-pqx","title":"Implement live benchmark with real services","description":"In scripts/benchmark.py:284, LiveBenchmark.run() is not implemented. Requires: real database setup, LLM client configuration, session creation, and turn processing with real API calls to validate end-to-end latency.","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T07:47:21.822114382Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:53:56.39482924Z","closed_at":"2026-01-30T14:53:56.39482924Z","close_reason":"Deprecated - benchmark tooling, lower priority than core features"}
{"id":"interview-system-v2-q1n","title":"Update TwoTierScoringEngine with new formula","description":"Refactor score_candidate() to use new formula: scorer_sum = Σ(strategy_weight × raw_score) × phase_multiplier. Remove base_weight, use direct strategy_weights from config.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:57.424981807Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T00:09:29.294275302Z","closed_at":"2026-01-23T00:09:29.294275302Z","close_reason":"Updated TwoTierScoringEngine with new formula","dependencies":[{"issue_id":"interview-system-v2-q1n","depends_on_id":"interview-system-v2-0il","type":"blocks","created_at":"2026-01-23T00:01:07.265181292Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-q2y","title":"Fix session creation and navigation flow","description":"Bug: After clicking 'Start Interview', session was created but interview screen didn't appear. Session appeared briefly then disappeared.\n\nRoot cause: In SessionControls.render(), the early return in tab2 prevented the final return statement from executing. When a session was created from tab1, st.rerun() would happen, but the final 'return st.session_state.get(\"current_session\")' never executed because tab2's return intercepted it.\n\nFix: \n1. Removed early return from tab2 - always fall through to final return\n2. Invalidate sessions cache (st.session_state.sessions = None) after creating new session so list refreshes","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T21:10:53.097637733Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T21:11:00.990584335Z","closed_at":"2026-01-21T21:11:00.990584335Z","close_reason":"Fixed navigation flow by removing early return and invalidating sessions cache"}
{"id":"interview-system-v2-qce","title":"Remove coverage-driven mode infrastructure (system is exploratory-only)","description":"The system is purely exploratory research — there is no evaluative/coverage-driven mode. Extensive coverage infrastructure exists as dead code across ~15 files and ~500 lines.\n\nDead code to remove:\n\n**Domain Models:**\n- interview_state.py: InterviewMode.COVERAGE_DRIVEN enum value, TopicPriority enum (103-108), TopicState class (111-186), CoverageState class (188-353), coverage branch in create_interview_state() (568-584), _depth_for_priority() (590-597)\n- knowledge_graph.py: ElementCoverage class (79-85), CoverageState class (88-96), coverage_state field in GraphState (157-160)\n- concept.py: Duplicate ElementCoverage \u0026 CoverageState (107-123)\n- session.py: coverage_score field, mode defaulting to COVERAGE_DRIVEN\n- turn.py: mode field defaulting to COVERAGE_DRIVEN\n\n**Configuration:**\n- interview_config.yaml: target_coverage (line 20), min_turns (line 23)\n- config.py: default_target_coverage (93-95), target_coverage session config (131-136)\n\n**API Schemas:**\n- schemas.py: mode fields defaulting to COVERAGE_DRIVEN, coverage field in ScoringSchema, target_coverage in SessionStatusResponse\n- concepts.py route: ConceptCompletion schema (33-39)\n\n**Persistence:**\n- 001_initial.sql: sessions.coverage_score column, concept_elements table, scoring_history.coverage_score\n- session_repo.py: ~6 coverage_score references in INSERT/UPDATE/SELECT\n- graph_repo.py: _build_coverage_state() and related element-coverage linking\n\n**Services:**\n- session_service.py: target_coverage parameter and assignments\n- scoring_persistence_stage.py: coverage_score references throughout\n- context_loading_stage.py: CoverageState import and placeholder init\n\n**Signals:**\n- coverage.py: CoverageBreadthSignal + MissingTerminalValueSignal (already tracked in interview-system-v2-6xa)\n\nNote: Change all remaining InterviewMode defaults from COVERAGE_DRIVEN to EXPLORATORY. Consider whether InterviewMode enum itself should be simplified to just EXPLORATORY.\n\nThis is a large cleanup — consider splitting into phases:\nPhase 1: Fix defaults (InterviewMode → EXPLORATORY everywhere)\nPhase 2: Remove CoverageState from GraphState and domain models\nPhase 3: Clean up persistence layer and API schemas\nPhase 4: Remove interview_state.py coverage classes","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:14:57.574289862Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T12:59:39.569588738Z","closed_at":"2026-01-30T12:59:39.569588738Z","close_reason":"Removed all coverage-driven mode infrastructure: 60 files changed, 142 insertions, 1680 deletions across domain models, persistence, services, API, config, tests, and DB migrations"}
{"id":"interview-system-v2-qsk","title":"Phase 4: Configuration Consolidation","description":"Create config/interview_config.yaml with session settings, phase thresholds, strategy applicability. Update services to load from centralized config.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T10:13:22.094293561Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T10:32:27.732112287Z","closed_at":"2026-01-23T10:32:27.732112287Z","close_reason":"All 4 phases of ADR-008 implemented successfully by sub-agents. Phase 1: Fixed layer violations with UtteranceRepository. Phase 2: Formalized contracts with typed models and protocols. Phase 3: Created 10-stage pipeline architecture. Phase 4: Centralized configuration in interview_config.yaml."}
{"id":"interview-system-v2-rk9","title":"Spec 2.2: LLM Client (Anthropic, async httpx)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:30.127511375Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:24:32.096391587Z","closed_at":"2026-01-21T07:24:32.096396569Z","dependencies":[{"issue_id":"interview-system-v2-rk9","depends_on_id":"interview-system-v2-ag4","type":"blocks","created_at":"2026-01-21T07:19:13.253867638Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-ry8","title":"Trim strategy_history to prevent unbounded growth","description":"GraphState.strategy_history is append-only with no trimming logic. Add max length or sliding window to prevent unbounded memory growth over long interviews. Ref: jolly-dancing-wilkes.md Part 2C, Part 4 #6","status":"open","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:36:58.492775Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:36:58.492775Z","comments":[{"id":5,"issue_id":"interview-system-v2-ry8","author":"michaelarutyunov","text":"## Sufficiency: GOOD\n\n### Current state:\n- strategy_history is List[str] in GraphState (knowledge_graph.py:113)\n- Append-only via record_strategy() method — no trimming\n- Consumed by temporal.strategy_repetition_count signal for diversity tracking\n- Persisted to DB via session state\n\n### Implementation:\n- Add max_length param (suggest 20-30, enough for diversity window)\n- Trim oldest entries on append, or use collections.deque\n- Update record_strategy() method\n\n### Watch-outs \u0026 Risks:\n1. **Temporal signals depend on history length** — trimming too aggressively may reduce diversity detection. Check how strategy_repetition_count uses the history\n2. **DB serialization** — verify the trim happens before persistence, not after load\n3. **Backward compat** — existing sessions may have long histories. Trim on load too\n\n### Model guidance: **Sonnet-level** (or Haiku). Mechanical change, well-scoped. ~10 lines of code.","created_at":"2026-02-02T15:07:17Z"},{"id":16,"issue_id":"interview-system-v2-ry8","author":"michaelarutyunov","text":"## Implementation Decision (resolved)\n\n**Approach**: Use `collections.deque(maxlen=30)` for automatic trimming.\n\n**Implementation**:\n```python\nfrom collections import deque\nfrom pydantic import Field, field_validator\n\n# In GraphState model (knowledge_graph.py:113):\nstrategy_history: Any = Field(\n    default_factory=lambda: deque(maxlen=30),\n    description=\"History of recently used strategies (max 30 for diversity tracking)\",\n)\n\n@field_validator('strategy_history', mode='before')\n@classmethod\ndef _ensure_deque(cls, v):\n    \"\"\"Convert list to deque on load from DB (backward compat).\"\"\"\n    if isinstance(v, list):\n        return deque(v, maxlen=30)\n    return v\n```\n\n**Rationale**: Signals only use last 5 entries. maxlen=30 provides 6x buffer. Automatic trimming prevents manual maintenance. Pydantic serializes deque↔list automatically.\n\n**Files**: src/domain/models/knowledge_graph.py (line 113, add validator after line 134)\n","created_at":"2026-02-02T23:19:21Z"}]}
{"id":"interview-system-v2-sa8","title":"Add terminal value detection for dynamic session termination","description":"Add terminal value detection for dynamic session termination. Reached terminal values turns 14-19 but continued to turn 20. From session_05a609ac.json ID7.","status":"closed","priority":3,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:45:11.423722431Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T01:18:44.63682865Z","closed_at":"2026-01-25T01:18:44.63682865Z","close_reason":"Invalid - Terminal values do NOT indicate interview completion in MEC methodology. Each terminal value is one chain endpoint, but MEC requires mapping multiple value networks. P1 issues (exhaustion/repetition tracking) already solve the real problem - once terminal values found, system shifts to synthesis/deepen/broaden naturally. Stopping at first terminal value would give incomplete value network."}
{"id":"interview-system-v2-smg","title":"Implement PeripheralReadinessScorer","description":"Tier-2 scorer using band-based logic: if strategy.id==bridge and (density\u003e0.7 and count\u003e=3): score=1.5, elif density\u003e0.5 or count\u003e=1: score=1.2, else: 1.0","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:44.846990001Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T21:21:49.815203033Z","closed_at":"2026-01-24T21:21:49.815203033Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-smg","depends_on_id":"interview-system-v2-4qs","type":"blocks","created_at":"2026-01-23T00:01:06.474445178Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-sxb","title":"Remove medium-priority dead code and refactoring artifacts","description":"Medium-priority dead code to clean up:\n1. _LEGACY_PERSONAS dict in llm/prompts/synthetic.py - replaced by YAML persona loader\n2. find_node_by_label() in graph_repo.py - replaced by find_node_by_label_and_type()\n3. Legacy concept fields (topic, insight, promise, rtb) in domain/models/concept.py\n4. TurnResult = PipelineTurnResult re-export in session_service.py\n5. Focus.to_dict()/from_dict() pre-Pydantic methods in turn.py\n6. TurnResult.to_response_dict() old API format in turn.py\n7. Concept loader _v2 suffix fallback in concept_loader.py\n\nAlso ~25 backward-compat properties in PipelineContext (context.py) that delegate to contract outputs. Review after migration stabilizes.\nRef: jolly-dancing-wilkes.md Part 3 MEDIUM PRIORITY","status":"open","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:37:15.531703194Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:37:15.531703194Z","dependencies":[{"issue_id":"interview-system-v2-sxb","depends_on_id":"interview-system-v2-pdy","type":"blocks","created_at":"2026-02-02T12:37:23.002321555Z","created_by":"michaelarutyunov"}],"comments":[{"id":9,"issue_id":"interview-system-v2-sxb","author":"michaelarutyunov","text":"## Sufficiency: GOOD\n\n7 items clearly identified with file paths and line numbers in the issue body.\n\n### Watch-outs \u0026 Risks:\n1. **_LEGACY_PERSONAS may be imported as PERSONAS** — check if anything imports PERSONAS from synthetic.py\n2. **find_node_by_label may be called from tests** — grep tests/ before removing\n3. **Legacy concept fields** (topic, insight, promise, rtb) — may be in DB migrations or serialized data. Removing from model doesn't remove from DB\n4. **Focus.to_dict()/from_dict()** — check if any API response serialization uses these\n5. **TurnResult.to_response_dict()** — same concern, may be used in API routes\n6. **~25 backward-compat properties in PipelineContext** — DON'T remove these in this issue. They're a separate architectural decision about how to access contract outputs. Evaluate after migration stabilizes\n7. **concept_loader _v2 fallback** — check if any concept files actually use the _v2 suffix\n\n### Model guidance: **Sonnet-level**. Mechanical deletion with grep verification. Do one item at a time, run tests between each. Blocked by pdy (high-priority dead code first).","created_at":"2026-02-02T15:07:42Z"}]}
{"id":"interview-system-v2-sxj","title":"Add sentiment to conversation turns","description":"Add sentiment field to turn objects. Call LLM API (llm_light) to extract sentiment (-1 to +1) for each respondent utterance. Store in conversation_history.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T00:00:44.601447201Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T00:06:48.146542577Z","closed_at":"2026-01-25T00:06:48.146542577Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-sxj","depends_on_id":"interview-system-v2-ekm","type":"blocks","created_at":"2026-01-23T00:01:07.491112536Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-t19","title":"Document and improve signal normalization fallback","description":"Signal normalization in scoring.py:75 uses arbitrary /10.0 heuristic for values \u003e1 with no documentation of why this value. Either document the rationale, make it configurable, or fail on missing norms. Also: missing signals score as 0 with no distinction between 'not applicable' vs 'detector failed'. Ref: jolly-dancing-wilkes.md Part 2A #1,#3, Part 4 #8","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:37:03.597372162Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T18:40:08.064297801Z","closed_at":"2026-02-02T18:40:08.064297801Z","close_reason":"Implemented: removed /10.0 fallback (raise ValueError instead), added per-detector try/except in detect_all(), removed overly-strict load-time norm coverage check (runtime check sufficient). 44 tests pass.","dependencies":[{"issue_id":"interview-system-v2-t19","depends_on_id":"interview-system-v2-fr4","type":"blocks","created_at":"2026-02-02T18:18:07.322278566Z","created_by":"michaelarutyunov"}],"comments":[{"id":7,"issue_id":"interview-system-v2-t19","author":"michaelarutyunov","text":"## Sufficiency: NEEDS ENRICHMENT\n\n### Current state:\n- _normalize_numeric() in scoring.py:55-75 uses /10.0 fallback when no signal_norms defined\n- signal_norms is optional in MethodologyConfig (registry.py:39)\n- Only some YAML configs define signal_norms — check each of the 5 configs\n- Missing signals return None from _get_signal_value, which then scores as 0\n\n### Two sub-problems:\n1. **Normalization fallback**: document why /10.0, or replace with per-methodology norms\n2. **Missing vs failed signals**: both score as 0, no distinction. Need separate handling\n\n### Watch-outs \u0026 Risks:\n1. **Changing normalization affects all scores** — existing methodology tuning is calibrated to current behavior. Any change needs re-validation with synthetic interviews\n2. **Missing signal = 0 is actually reasonable** for most cases — the issue is FAILED signals (detector threw exception) should be logged/flagged differently\n3. **signal_norms coverage** — need to audit which signals need norms and which are naturally [0,1]\n4. **Compound boolean signals** (e.g., 'llm.response_depth.surface') are True/False, not numeric — normalization doesn't apply to them\n\n### Model guidance: **Opus-level** — requires understanding the scoring math, auditing all signals for their value ranges, and making decisions about failure modes. Changes here can silently break strategy selection quality.","created_at":"2026-02-02T15:07:18Z"},{"id":14,"issue_id":"interview-system-v2-t19","author":"michaelarutyunov","text":"## Design Decisions (resolved)\n\n**Missing norms**: Require all norms. If a numeric signal value \u003e1 has no norm defined in signal_norms, raise an error. This forces completeness and eliminates the arbitrary /10.0 fallback.\n\n**Failed signals**: Log + score as 0. When a signal detector throws an exception, log the error explicitly (separate from \"signal not detected\"), but score the signal as 0. No change to scoring math.\n\n**Implementation notes**:\n- Remove the /10.0 fallback in _normalize_numeric() — replace with raise ValueError(\"Missing signal_norms for {signal_key}\")\n- Tie into fr4 (YAML validation) — validate that signal_norms covers all numeric signals at load time\n- Audit all 5 methodology YAMLs to add signal_norms for any signal that produces values \u003e1\n- In signal detection, catch exceptions per-detector and log with level=error (currently uses debug/warning)\n- Need to identify which signals produce numeric values \u003e1: graph.node_count, graph.max_depth, graph.orphan_count, temporal.strategy_repetition_count, etc.","created_at":"2026-02-02T18:18:01Z"}]}
{"id":"interview-system-v2-tk4","title":"Use discourse markers in scoring","description":" discourse_markers are extracted by LLM and saved to utterances table but never used. Could inform ReasoningQualityScorer (causal vs associative), contradiction detection ('but', 'actually'), and stance shift detection. Already collected via extraction LLM - just need to wire to scorers or graph_state.","status":"open","priority":4,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T00:15:10.890725686Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T00:15:10.890725686Z"}
{"id":"interview-system-v2-tqw","title":"Schema Infrastructure: YAML, models, loader","description":"Create config/methodologies/means_end_chain.yaml with schema definition. Create src/domain/models/methodology_schema.py with Pydantic models. Create src/core/schema_loader.py with load function and caching. Write unit tests for schema loading.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-23T02:02:23.391054387Z","created_by":"michaelarutyunov","updated_at":"2026-01-23T02:05:33.585642087Z","closed_at":"2026-01-23T02:05:33.585642087Z","close_reason":"Closed"}
{"id":"interview-system-v2-tud","title":"Implement actual chain length calculation for depth scoring","description":"In src/services/scoring/tier2/depth_breadth_balance.py:48 and 193, depth calculation uses edge_count/node_count heuristic. Need actual BFS chain length calculation from root to leaf nodes. Blocked by proper edge connectivity (extraction prompt should fix this).","status":"closed","priority":3,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T07:47:21.822550249Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T00:06:48.167934511Z","closed_at":"2026-01-25T00:06:48.167934511Z","close_reason":"Closed"}
{"id":"interview-system-v2-u4r","title":"Enhance scorers for depth-aware coverage","description":"Update CoverageGapScorer for depth-aware gap detection (uncovered=high priority, shallow=medium). Update DepthBreadthBalanceScorer to use new coverage_state. Enhance focus generation in strategy_service.py to prioritize uncovered and shallow elements.","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T17:52:31.22884465Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T18:27:36.672873539Z","closed_at":"2026-01-25T18:27:36.672873539Z","close_reason":"Implemented (depth_calculator.py, scorer updates). Phase 3 (LLM linking) skipped - fallback alias matching used instead.","dependencies":[{"issue_id":"interview-system-v2-u4r","depends_on_id":"interview-system-v2-ui4","type":"blocks","created_at":"2026-01-25T17:52:44.495969959Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-u9w","title":"Fix coverage display - always shows 0%","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T22:47:05.777637951Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:40:11.949579687Z","closed_at":"2026-01-24T00:40:11.949579687Z","close_reason":"Fixed by commit 313c209 - scoring metrics, edge extraction, and strategy selection fixes. Includes: (1) StrategyService implementation, (2) NoveltyScorer implementation, (3) coverage_state tracking in graph_repo, (4) AmbiguityScorer recent_nodes bug fix, (5) EngagementScorer threshold fix, (6) DepthBreadthBalanceScorer threshold fix"}
{"id":"interview-system-v2-ui4","title":"Implement depth tracking via chain validation","description":"Create src/services/depth_calculator.py for chain validation algorithm. For each element: get linked nodes, build subgraph, find longest undirected path. depth_score = longest_chain / methodology_ladder_length. Update GraphState with new coverage_state structure.","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-25T17:52:31.046885565Z","created_by":"michaelarutyunov","updated_at":"2026-01-25T18:27:36.666407857Z","closed_at":"2026-01-25T18:27:36.666407857Z","close_reason":"Implemented (depth_calculator.py, scorer updates). Phase 3 (LLM linking) skipped - fallback alias matching used instead.","dependencies":[{"issue_id":"interview-system-v2-ui4","depends_on_id":"interview-system-v2-56t","type":"blocks","created_at":"2026-01-25T17:52:44.24988883Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-uq1","title":"Spec 2.9: Session Service (orchestrates turn pipeline)","status":"closed","priority":0,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:51.670482385Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:44:12.95471464Z","closed_at":"2026-01-21T07:44:12.95471464Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-uq1","depends_on_id":"interview-system-v2-kdf","type":"blocks","created_at":"2026-01-21T07:19:23.417970301Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-uq1","depends_on_id":"interview-system-v2-nu6","type":"blocks","created_at":"2026-01-21T07:19:23.669028564Z","created_by":"michaelarutyunov"},{"issue_id":"interview-system-v2-uq1","depends_on_id":"interview-system-v2-fp0","type":"blocks","created_at":"2026-01-21T07:19:23.939567129Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-uvu","title":"Fix API request format mismatch in create_session","description":"Bug: 'Start Interview' button did nothing because APIClient.create_session() sent wrong request format.\n\nRoot cause: Client sent {concept_id, max_turns, target_coverage} but backend expects {concept_id, methodology, config}.\n\nFix: Updated APIClient.create_session() and create_session_async() to match backend SessionCreate schema. Updated controls.py UI to remove obsolete max_turns/target_coverage options and add methodology selection.","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T21:00:11.16363173Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T21:00:19.425125989Z","closed_at":"2026-01-21T21:00:19.425125989Z","close_reason":"Fixed API request format to match backend SessionCreate schema"}
{"id":"interview-system-v2-v42","title":"Fix turn pipeline strategy and signal handling","status":"tombstone","priority":0,"issue_type":"epic","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-26T11:59:43.577231835Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T14:51:33.009281814Z","deleted_at":"2026-01-30T14:51:33.009281814Z","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"interview-system-v2-vpm","title":"Replace magic /10.0 signal normalization with signal-specific norms","description":"scoring.py:39-45 normalizes all count signals by dividing by 10.0 and clipping to [0,1]. A graph with 10 nodes scores identically to 100 nodes. This makes strategies depending on graph size (broaden, explore) unable to differentiate small vs large graphs.\n\nFix: Add per-signal normalization config in YAML (e.g., node_count.max_expected: 50) or use sigmoid normalization. Remove the hardcoded /10.0 heuristic.\n\nFiles: src/methodologies/scoring.py:39-45","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:17.020422978Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T08:38:54.603036022Z","closed_at":"2026-01-30T08:38:54.603036022Z","close_reason":"Replaced magic /10.0 normalization with per-signal max_expected norms loaded from methodology YAML configs. Added signal_norms to MethodologyConfig, scoring.py, and pipeline wiring. 16 tests cover normalization, fallback, and YAML loading."}
{"id":"interview-system-v2-w61","title":"Phase 5: Global response tracking and validation triggers","description":"Implement global response signals and validation strategy triggers. Tasks: 1) Implement llm.global_response_trend signal, 2) Implement llm.hedging_language signal, 3) Update validation strategy to trigger on uncertainty/hedging, 4) Add fatigue detection and revitalization logic, 5) Tests","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:14:58.138814454Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T08:04:38.241604398Z","closed_at":"2026-01-29T08:04:38.241604398Z","close_reason":"Closed"}
{"id":"interview-system-v2-wqo","title":"Add LLM call timeout/retry with circuit breaker","description":"No retry logic, circuit breakers, or fallback strategies for LLM timeouts. A single LLM failure in ExtractionStage or QuestionGenerationStage kills the entire turn. Add at minimum circuit breaker for extraction and question generation. Ref: jolly-dancing-wilkes.md Part 1A, Part 4 #4","status":"open","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-02-02T12:36:53.901400298Z","created_by":"michaelarutyunov","updated_at":"2026-02-02T12:36:53.901400298Z","comments":[{"id":4,"issue_id":"interview-system-v2-wqo","author":"michaelarutyunov","text":"## Sufficiency: GOOD\n\nArchitecture already fully mapped.\n\n### Current state:\n- Single LLM abstraction: LLMClient → AnthropicClient, OpenAICompatibleClient\n- 3 client types: extraction (30s), scoring (15s), generation (30s)\n- Custom exceptions defined but UNUSED: LLMTimeoutError, LLMRateLimitError in core/exceptions.py\n- API exception handlers already map these to HTTP codes — just not wired up\n- ExtractionService: catches Exception → graceful degradation\n- QuestionService: catches Exception → raises RuntimeError (kills pipeline)\n\n### Watch-outs \u0026 Risks:\n1. **httpx.AsyncClient created per-call** — circuit breaker state lives on LLMClient instance\n2. **Don't retry 4xx (except 429)**\n3. **Latency impact** — 3 retries with backoff = 90s+ wait. Use max 2 retries for conversational UX\n4. **Scoring client uses Kimi/Moonshot** — different provider, different error patterns\n5. **Don't add tenacity library** — manual retry loop, no new dependency\n6. **QuestionService RuntimeError** — pipeline still has no fallback if all retries fail\n\n### Model guidance: **Sonnet-level** — clear architecture, single insertion point (client.py), well-known pattern. Exception hierarchy already defined.","created_at":"2026-02-02T15:06:36Z"},{"id":18,"issue_id":"interview-system-v2-wqo","author":"michaelarutyunov","text":"## Implementation Decision (resolved)\n\n**Approach**: Retry wrapper in `complete()` method (Option 1) with `max_retries=1` (2 total attempts).\n\n**Implementation** (add to both AnthropicClient.complete() and OpenAICompatibleClient.complete()):\n\n```python\nasync def complete(self, prompt, system=None, temperature=None, max_tokens=None):\n    \"\"\"Call LLM API with automatic retry on timeout/rate-limit.\"\"\"\n    from src.core.exceptions import LLMTimeoutError, LLMRateLimitError\n    import asyncio\n    \n    max_retries = 1  # 2 total attempts\n    base_delay = 1.0  # seconds\n    \n    for attempt in range(max_retries + 1):  # 0, 1\n        try:\n            start = time.perf_counter()\n            \n            # Existing HTTP call code\n            async with httpx.AsyncClient(timeout=self.timeout) as client:\n                response = await client.post(...)\n                response.raise_for_status()\n                data = response.json()\n            \n            # Success - return\n            latency_ms = (time.perf_counter() - start) * 1000\n            return LLMResponse(...)\n            \n        except httpx.TimeoutException as e:\n            log.warning(\"llm_timeout\", attempt=attempt+1, max_retries=max_retries)\n            if attempt \u003c max_retries:\n                delay = base_delay * (2 ** attempt)  # 1s on first retry\n                log.info(\"llm_retry_after_timeout\", delay_seconds=delay)\n                await asyncio.sleep(delay)\n            else:\n                raise LLMTimeoutError(\n                    f\"LLM call timed out after {max_retries + 1} attempts (timeout={self.timeout}s)\"\n                ) from e\n        \n        except httpx.HTTPStatusError as e:\n            if e.response.status_code == 429:  # Rate limit\n                log.warning(\"llm_rate_limit\", attempt=attempt+1)\n                if attempt \u003c max_retries:\n                    delay = base_delay * (2 ** attempt)\n                    await asyncio.sleep(delay)\n                else:\n                    raise LLMRateLimitError(\n                        f\"Rate limit exceeded after {max_retries + 1} attempts\"\n                    ) from e\n            else:\n                # Don't retry other 4xx/5xx\n                log.error(\"llm_http_error\", status_code=e.response.status_code)\n                raise\n```\n\n**Parameters**:\n- max_retries=1 → 2 total attempts\n- Backoff: 1s after first failure\n- Worst case latency: 30s + 1s + 30s = ~61s (acceptable for conversational UX)\n\n**Files**: \n- src/llm/client.py (AnthropicClient.complete lines 165-260, OpenAICompatibleClient.complete lines 310-400)\n- Import asyncio and exceptions from src.core.exceptions\n","created_at":"2026-02-02T23:19:52Z"}]}
{"id":"interview-system-v2-x6f","title":"Spec 2.11: Pipeline Integration Test (end-to-end test)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:52.637669713Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:44:12.967265824Z","closed_at":"2026-01-21T07:44:12.967265824Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-x6f","depends_on_id":"interview-system-v2-19d","type":"blocks","created_at":"2026-01-21T07:19:24.977427141Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-xbc","title":"Load elements_total from concept config in GraphState","description":"In src/persistence/repositories/graph_repo.py:509, coverage_state.elements_total is set to empty array. Need to load from config/concepts/{concept_id}.yaml to properly calculate coverage ratio for CoverageGapScorer.","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T07:47:21.818867438Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T20:55:15.534648646Z","closed_at":"2026-01-24T20:55:15.534648646Z","close_reason":"Implemented in Phase 2 and P2 blockers work"}
{"id":"interview-system-v2-xil","title":"Phase 3: Joint Strategy-Node scoring","description":"Modify scoring to evaluate (strategy, node) pairs jointly. Tasks: 1) Modify MethodologyStrategyService.select_strategy_and_focus for joint scoring, 2) Update YAML configs to reference node signals, 3) Update FocusSelectionService or deprecate if no longer needed, 4) Add integration tests","status":"closed","priority":2,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T01:14:55.92248079Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T07:24:04.329583562Z","closed_at":"2026-01-29T07:24:04.329583562Z","close_reason":"Closed"}
{"id":"interview-system-v2-y1c","title":"Fix pipeline contract type mismatch for Phase 3","description":"Fix StrategySelectionOutput.strategy_alternatives type to match Phase 3 joint scoring output.\n\nCurrent: List[tuple[str, float]]\nShould be: List[Union[tuple[str, float], tuple[str, str, float]]]\n\nFile: src/domain/models/pipeline_contracts.py line 166","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T08:38:34.633770983Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T11:23:40.660324118Z","closed_at":"2026-01-29T11:23:40.660324118Z","close_reason":"Closed"}
{"id":"interview-system-v2-yho","title":"Implement TF-IDF cosine similarity for redundancy detection","status":"closed","priority":2,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:58.856361394Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T00:42:50.243595023Z","closed_at":"2026-01-24T00:42:50.243595023Z","close_reason":"Implemented: (1) text_similarity.py with TFIDFCosineSimilarity class, (2) all 3 Tier1 scorers (knowledge_ceiling, element_exhausted, recent_redundancy) using text_similarity, (3) StrategySelectionStage integrated into SessionService pipeline. Blocked by yho now resolved."}
{"id":"interview-system-v2-yji","title":"Add closing and reflection strategies to strategy definitions","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T23:53:58.291390255Z","created_by":"michaelarutyunov","updated_at":"2026-01-22T00:05:51.991900388Z","closed_at":"2026-01-22T00:05:51.991900388Z","close_reason":"Two-tier scoring system implemented - see ADR-004"}
{"id":"interview-system-v2-z44","title":"Spec 1.2: SQLite Schema","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T01:57:27.803759824Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T02:00:22.729514787Z","closed_at":"2026-01-21T02:00:22.729514787Z","close_reason":"Verified by subagent"}
{"id":"interview-system-v2-z9o","title":"Spec 2.3: Extraction Prompts (JSON-structured prompts)","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-21T07:16:30.595292405Z","created_by":"michaelarutyunov","updated_at":"2026-01-21T07:25:54.781066778Z","closed_at":"2026-01-21T07:25:54.781070487Z","dependencies":[{"issue_id":"interview-system-v2-z9o","depends_on_id":"interview-system-v2-ag4","type":"blocks","created_at":"2026-01-21T07:19:13.812393311Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-zfy","title":"Add is_terminal and level to NodeState","description":"Add node_type, is_terminal, level fields to NodeState dataclass. Update extraction service to set these from schema during concept parsing.","status":"closed","priority":1,"issue_type":"task","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-29T12:21:29.962442895Z","created_by":"michaelarutyunov","updated_at":"2026-01-29T12:55:12.027885686Z","closed_at":"2026-01-29T12:55:12.027885686Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-zfy","depends_on_id":"interview-system-v2-din","type":"blocks","created_at":"2026-01-29T12:21:41.779019516Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-zpd","title":"Add dedicated clarify/rephrase strategy","description":"Create new 'clarify' strategy definition in scoring.yaml with highest weight on AmbiguityScorer (0.25). Update question.py to handle clarify prompts with 'Let me ask differently' patterns.","status":"closed","priority":1,"issue_type":"feature","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-26T11:59:58.132696189Z","created_by":"michaelarutyunov","updated_at":"2026-01-26T13:05:24.819948679Z","closed_at":"2026-01-26T13:05:24.819948679Z","close_reason":"Closed","dependencies":[{"issue_id":"interview-system-v2-zpd","depends_on_id":"interview-system-v2-pe4","type":"blocks","created_at":"2026-01-26T12:00:05.51934735Z","created_by":"michaelarutyunov"}]}
{"id":"interview-system-v2-ztd","title":"Load strategies from YAML config instead of hardcoded list","status":"closed","priority":2,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-24T19:00:50.212383891Z","created_by":"michaelarutyunov","updated_at":"2026-01-24T20:55:15.520934081Z","closed_at":"2026-01-24T20:55:15.520934081Z","close_reason":"Implemented in Phase 2 and P2 blockers work"}
{"id":"interview-system-v2-zv9","title":"Replace assert statements with explicit exceptions in production code","description":"graph_repo.py uses assert for post-condition checks (e.g., line 115, 329: 'assert node is not None'). Python assert is stripped with -O flag, meaning in production this either crashes the server (without -O) or silently passes None (with -O).\n\nFix: Replace all production assert statements with explicit ValueError or RuntimeError raises.\n\nFiles: src/persistence/repositories/graph_repo.py:115, 329","status":"closed","priority":1,"issue_type":"bug","owner":"mikhail.arutyunov@gmail.com","created_at":"2026-01-30T01:11:17.639935672Z","created_by":"michaelarutyunov","updated_at":"2026-01-30T13:10:04.048567944Z","closed_at":"2026-01-30T13:10:04.048567944Z","close_reason":"All three bugs fixed:\\n\\np38: Added find_node_by_label_and_type() method to GraphRepository and updated GraphService to use type-aware deduplication. Old find_node_by_label() deprecated with warning comment.\\n\\nzv9: Replaced assert statements with explicit RuntimeError raises in GraphRepository.create_node() and create_edge().\\n\\nmkh: Added validate_api_keys() function in main.py that validates all configured LLM provider API keys at application startup (in lifespan handler before database init)."}
